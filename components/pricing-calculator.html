{{- /* 
================================================================================
PRICING CALCULATOR COMPONENT
================================================================================
Interactive tool that allows users to select their current apps and team size 
to calculate potential annual savings when switching to Blue.

USAGE:
{{template "pricing-calculator"}}

DATA STRUCTURE:
No external data required - all data is embedded in the component
*/ -}}
{{define "pricing-calculator"}}
<!-- Pricing Calculator Component -->
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 dark:bg-gray-900" 
     x-data="pricingCalculator()">
  <div class="mb-12">
    <h2 class="text-3xl md:text-4xl font-medium tracking-tight text-gray-900 dark:text-gray-100 mb-4">
      Calculate your savings with Blue
    </h2>
    <p class="text-lg text-gray-600 dark:text-gray-400 max-w-3xl">
      Choose your current apps and team size to see your potential annual savings.
    </p>
  </div>
  
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8" style="grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));">
    <!-- Left Box: App Selection and Team Size -->
    <div class="rounded-3xl p-8 ring-1 ring-gray-200 dark:ring-gray-700 sm:p-10">
      <h3 class="text-xl font-semibold leading-8 tracking-tight text-gray-800 dark:text-white mb-6">
        What apps do you use?
      </h3>
      
      <!-- App Grid -->
      <div class="grid grid-cols-5 gap-4 mb-8">
        <template x-for="competitor in competitors" :key="competitor.id">
          <div class="relative group">
            <!-- Tooltip -->
            <div x-show="tooltipVisible === competitor.id"
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 scale-95"
                 x-transition:enter-end="opacity-100 scale-100"
                 x-transition:leave="transition ease-in duration-150"
                 x-transition:leave-start="opacity-100 scale-100"
                 x-transition:leave-end="opacity-0 scale-95"
                 class="absolute z-10 p-1.5 text-xs text-white bg-brand-blue rounded-md shadow-md bottom-full left-1/2 transform -translate-x-1/2 mb-2 whitespace-nowrap">
              <span x-text="`${competitor.name} @ $${competitor.cost}/month/user`"></span>
            </div>
            
            <!-- App Button -->
            <button @click="toggleApp(competitor.id)"
                    @mouseenter="tooltipVisible = competitor.id"
                    @mouseleave="tooltipVisible = null"
                    :class="[
                      'w-16 h-16 rounded-xl shadow-md transition duration-300 ease-in-out flex items-center justify-center relative',
                      selectedApps.includes(competitor.id) 
                        ? 'ring-2 ring-brand-blue dark:ring-brand-lighter-blue' 
                        : 'ring-1 ring-gray-200 dark:ring-gray-600 hover:ring-gray-300 dark:hover:ring-gray-500'
                    ]">
              <img :src="competitor.logo" :alt="competitor.name + ' Logo'" class="w-12 h-12" />
              
              <!-- Selected Checkmark -->
              <div x-show="selectedApps.includes(competitor.id)"
                   x-transition:enter="transition ease-out duration-200"
                   x-transition:enter-start="opacity-0 scale-75"
                   x-transition:enter-end="opacity-100 scale-100"
                   x-transition:leave="transition ease-in duration-150"
                   x-transition:leave-start="opacity-100 scale-100"
                   x-transition:leave-end="opacity-0 scale-75"
                   class="absolute top-0 right-0 w-5 h-5 bg-brand-blue dark:bg-brand-lighter-blue rounded-full flex items-center justify-center transform translate-x-1/3 -translate-y-1/3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-white" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
              </div>
            </button>
          </div>
        </template>
      </div>
      
      <!-- Team Size Slider -->
      <h3 class="text-xl font-semibold leading-8 tracking-tight text-gray-800 dark:text-white mb-4">
        How many people work at your company?
      </h3>
      <input type="range"
             min="1"
             max="250"
             x-model="companySize"
             class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 
                    [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 
                    [&::-webkit-slider-thumb]:bg-brand-blue [&::-webkit-slider-thumb]:rounded-full 
                    [&::-webkit-slider-thumb]:shadow-sm [&::-webkit-slider-thumb]:cursor-pointer
                    [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:bg-brand-blue 
                    [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:shadow-sm 
                    [&::-moz-range-thumb]:cursor-pointer" />
      <div class="text-sm text-gray-600 dark:text-gray-400 mt-2">
        Company size: <span x-text="companySize"></span> <span x-text="companySize === 1 ? 'person' : 'people'"></span>
      </div>
    </div>
    
    <!-- Right Box: Savings Display -->
    <div class="rounded-3xl p-8 ring-1 ring-gray-200 dark:ring-gray-700 sm:p-10 flex flex-col items-center justify-center">
      <img src="logo/logo.svg" alt="Blue Logo" class="h-12 mb-6" />
      
      <p x-show="selectedApps.length === 0" 
         class="text-2xl font-semibold leading-8 tracking-tight text-center text-gray-900 dark:text-white">
        Select an app to see your savings
      </p>
      
      <p x-show="selectedApps.length > 0" 
         class="text-2xl font-semibold leading-8 tracking-tight text-center dark:text-white">
        You can save <span class="text-brand-blue dark:text-brand-lighter-blue">$<span x-text="formattedSavings"></span>/year</span> with Blue
      </p>
      
      <div class="h-[44px] mt-8">
        <a x-show="selectedApps.length > 0"
           href="https://app.blue.cc"
           target="_blank"
           class="inline-flex items-center px-4 py-2 text-sm font-semibold rounded-md border border-transparent 
                  bg-brand-blue text-white hover:bg-brand-blue/90 focus:outline-none focus:ring-2 
                  focus:ring-offset-2 focus:ring-brand-blue transition duration-150 ease-in-out 
                  dark:bg-brand-lighter-blue dark:text-gray-900 dark:hover:bg-brand-lighter-blue/90 
                  dark:focus:ring-brand-lighter-blue">
          Get Started
          <span class="ml-2 inline-flex items-center justify-center w-5 h-5 bg-white rounded text-xs font-bold 
                       text-brand-blue border border-brand-blue dark:bg-gray-900 dark:text-brand-lighter-blue 
                       dark:border-brand-lighter-blue">â†µ</span>
        </a>
      </div>
    </div>
  </div>
</div>
{{end}}