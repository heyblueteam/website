{{- /* 
================================================================================
DUAL BUTTON CTA COMPONENT
================================================================================
A prominent call-to-action section with title and two buttons (primary and secondary).

USAGE:
{{template "dual-button-cta" $ctaData}}

EXAMPLE IMPLEMENTATION:
{{$ctaData := parseJSON `{
    "Title": "Ready to see why 17,000 teams switched to Blue?",
    "PrimaryText": "Get started",
    "PrimaryUrl": "/contact/sales",
    "SecondaryText": "Take product tour",
    "SecondaryUrl": "/product-tour"
}`}}
{{template "dual-button-cta" $ctaData}}


DATA STRUCTURE:
{
    "Title": "Your CTA headline",          // Main headline text (required)
    "PrimaryText": "Primary action",       // Primary button text (optional)
    "PrimaryUrl": "/primary-link",         // Primary button URL (required if PrimaryText)
    "SecondaryText": "Secondary action",   // Secondary button text (optional)
    "SecondaryUrl": "/secondary-link",      // Secondary button URL (required if SecondaryText)
    "MarginBottom": "mb-20"                // Bottom margin class (optional, default: "mb-16")
}

FEATURES:
- Responsive layout: Stacked on mobile, side-by-side on desktop
- Blue background with rounded corners
- Primary button with arrow icon
- Secondary button with outline style
- Both buttons are optional
- Dark mode support

LAYOUT:
- Background: Blue-50 (dark: blue-950/30)
- Border radius: 3xl (1.5rem)
- Padding: 6 units mobile, 12 units tablet, 32 units desktop
- Button gap: 4 units (1rem)

STYLING:
- Title: 2xl-3xl font size, medium weight
- Primary button: Brand blue background, white text, arrow icon
- Secondary button: Blue outline, transparent background
- Hover states for both buttons
- Smooth transitions (150ms)

USE CASES:
- End of page CTAs
- Feature section CTAs
- Conversion prompts
- Demo/trial signups
*/ -}}
{{define "dual-button-cta"}}
<!-- Dual Button CTA Component -->
<section class="bg-blue-50 dark:bg-blue-950/30 rounded-3xl p-6 md:p-12 lg:p-32 {{if .MarginBottom}}{{.MarginBottom}}{{else}}mb-16{{end}}" x-data="{
    authState: null,
    init() {
        // Subscribe to auth state changes
        if (window.AuthStateManager) {
            this.unsubscribe = window.AuthStateManager.subscribe((authState) => {
                this.authState = authState;
            });
        } else {
            // Try again after a short delay in case AuthStateManager loads later
            setTimeout(() => {
                if (window.AuthStateManager) {
                    this.unsubscribe = window.AuthStateManager.subscribe((authState) => {
                        this.authState = authState;
                    });
                }
            }, 100);
        }
    },
    destroy() {
        // Clean up subscription
        if (this.unsubscribe) {
            this.unsubscribe();
        }
    }
}">
    <div class="flex flex-col lg:flex-row items-center justify-between gap-6">
        <!-- Title -->
        <h3 class="text-2xl md:text-3xl font-medium text-gray-900 dark:text-gray-100 flex-1">
            <span x-show="authState && authState.isLoggedIn">Ready to get back to work?</span>
            <span x-show="!authState || !authState.isLoggedIn">{{.Title}}</span>
        </h3>
        
        <!-- Buttons -->
        <div class="flex flex-col sm:flex-row items-center gap-4 flex-shrink-0">
            <!-- Secondary Button (Contact style) - Only show when not logged in -->
            <template x-if="(!authState || !authState.isLoggedIn) && {{if .SecondaryText}}true{{else}}false{{end}}">
                <a href="{{.SecondaryUrl}}" 
                   class="px-6 py-3 text-sm font-semibold rounded-md border-2 border-brand-blue bg-blue-50 dark:bg-blue-950/30 text-gray-900 dark:text-gray-100 hover:bg-blue-100 dark:hover:bg-blue-900/40 focus:outline-none transition duration-150 ease-in-out whitespace-nowrap">
                    {{.SecondaryText}}
                </a>
            </template>
            
            <!-- Primary Button -->
            <a :href="authState && authState.isLoggedIn ? 'https://app.blue.cc' : '{{.PrimaryUrl}}'" 
               :target="authState && authState.isLoggedIn ? '_blank' : '_self'"
               class="px-6 py-3 text-sm font-semibold rounded-md border border-transparent bg-brand-blue text-white hover:bg-brand-blue/90 focus:outline-none transition duration-150 ease-in-out flex items-center whitespace-nowrap">
                <span x-show="authState && authState.isLoggedIn">Launch App</span>
                <span x-show="!authState || !authState.isLoggedIn">{{.PrimaryText}}</span>
                <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                </svg>
            </a>
        </div>
    </div>
</section>
{{end}}