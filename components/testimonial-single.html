{{- /* 
================================================================================
TESTIMONIAL SINGLE COMPONENT
================================================================================
Displays a single testimonial with media (image/video) and quote side-by-side.

USAGE:
{{template "testimonial-single" dict "Quote" "..." "Name" "..." "Title" "..."}}

EXAMPLE IMPLEMENTATIONS:

1. With image:
{{template "testimonial-single" 
    dict 
        "Quote" "Blue transformed how we manage our global operations. We've reduced project delays by 40% and improved team collaboration across 12 time zones." 
        "Name" "Sarah Chen" 
        "Title" "VP of Operations, Fortune 500 Tech Company" 
        "ImageUrl" "/testimonials/sarah-chen.jpg"
        "MarginBottom" "mb-24"
}}

2. With video:
{{template "testimonial-single" 
    dict 
        "Quote" "The automation features in Blue save our team 20+ hours every week. It's been a game-changer for our productivity." 
        "Name" "Michael Rodriguez" 
        "Title" "Director of Engineering, Startup" 
        "VideoUrl" "/testimonials/michael-video.mp4"
        "PosterUrl" "/testimonials/michael-poster.jpg"
        "MarginBottom" "mb-24"
}}

Note: Common usage includes LogoSrc parameter but component doesn't use it.
Also uses Name/Title instead of Author.

DATA STRUCTURE:
{
    "Quote": "Testimonial text",         // Customer quote (required)
    "Name": "Person's name",            // Customer name (required)
    "Title": "Job title, Company",      // Customer title/company (required)
    "ImageUrl": "/path/to/image.jpg",   // Customer photo (required if no video)
    "VideoUrl": "/path/to/video.mp4",   // Testimonial video (optional)
    "PosterUrl": "/path/to/poster.jpg", // Video poster frame (optional)
    "MarginBottom": "mb-16"              // Bottom margin (optional, default: mb-16)
}

FEATURES:
- Side-by-side layout on desktop
- Square aspect ratio media
- Video with mute/unmute button
- Autoplay muted video
- Browser video controls
- Responsive grid layout
- Dark mode support

LAYOUT:
- Container: Gray-50 background, rounded-2xl
- Padding: 8 units mobile, 12 desktop
- Grid: 12 columns total
  - Media: 4 columns
  - Content: 8 columns
- Gap: 8 units mobile, 12 desktop
- Stacks vertically on mobile

MEDIA HANDLING:
- Aspect ratio: Square (1:1)
- Border radius: 2xl (1rem)
- Video: Autoplay, loop, muted
- Custom mute button overlay
- Video controls always visible
- Image: Cover fit, lazy loading

VIDEO CONTROLS:
- Mute button: Top-right corner
- Green when muted, black when unmuted
- Icon changes based on state
- AlpineJS-powered toggle
- Browser controls below

STYLING:
- Background: Gray-50 (dark: gray-800)
- Quote: 2xl-4xl font size, medium weight
- Quote color: Gray-900 (dark: gray-100)
- Name: lg font size, semibold
- Title: Regular text, gray-600
- Content spacing: 6 units between elements

USE CASES:
- Customer testimonials
- Case study highlights
- Video testimonials
- Success stories
- Partner quotes
*/ -}}
{{define "testimonial-single"}}
<!-- Single Testimonial Component with Image/Video Left, Content Right -->
<div class="bg-gray-50 dark:bg-gray-800 rounded-2xl p-8 lg:p-12 {{if .MarginBottom}}{{.MarginBottom}}{{else}}mb-16{{end}}">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12 items-center">
        <!-- Media Column -->
        <div class="lg:col-span-4">
            {{if .VideoUrl}}
                <!-- Video Element -->
                <div class="w-full aspect-square rounded-2xl overflow-hidden relative" 
                     x-data="{ 
                         isMuted: true,
                         toggleMute() {
                             const video = this.$refs.video;
                             this.isMuted = !this.isMuted;
                             video.muted = this.isMuted;
                         }
                     }">
                    <video 
                        x-ref="video"
                        class="w-full h-full object-cover border border-gray-200"
                        autoplay 
                        loop 
                        muted
                        controls
                        {{if .PosterUrl}}poster="{{.PosterUrl}}"{{end}}
                    >
                        <source src="{{.VideoUrl}}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    
                    <!-- Mute/Unmute Button -->
                    <button 
                        @click="toggleMute()"
                        :class="isMuted ? 'bg-green-500 bg-opacity-80' : 'bg-black bg-opacity-50'"
                        :title="isMuted ? 'Unmute video' : 'Mute video'"
                        class="absolute top-3 right-3 hover:bg-opacity-90 text-white p-2 rounded-full transition-all duration-200 z-10"
                    >
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <!-- Muted icon -->
                            <path x-show="isMuted" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.82L4.73 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.73l3.653-3.82a1 1 0 011.617.82zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z"/>
                            <!-- Unmuted icon -->
                            <path x-show="!isMuted" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.82L4.73 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.73l3.653-3.82a1 1 0 011.617.82zM12.146 5.146a1 1 0 011.414 0c2.39 2.391 2.39 6.268 0 8.658a1 1 0 01-1.414-1.414c1.598-1.598 1.598-4.232 0-5.83a1 1 0 010-1.414z"/>
                        </svg>
                    </button>
                </div>
            {{else}}
                <!-- Image Element -->
                <img 
                    src="{{.ImageUrl}}" 
                    alt="{{.Name}}" 
                    class="w-full aspect-square object-cover rounded-2xl"
                    loading="lazy"
                />
            {{end}}
        </div>
        
        <!-- Content Column -->
        <div class="lg:col-span-8 space-y-6">
            <!-- Quote -->
            <p class="text-2xl lg:text-4xl text-gray-900 dark:text-gray-100 font-medium leading-relaxed">
                "{{.Quote}}"
            </p>
            
            <!-- Author Info -->
            <div>
                <div class="font-semibold text-lg text-gray-900 dark:text-gray-100">{{.Name}}</div>
                <div class="text-gray-600 dark:text-gray-400">{{.Title}}</div>
            </div>
        </div>
    </div>
</div>

{{end}}