<!-- Main content -->
<!-- Custom personalized page heading for homepage -->
<div class="mb-16" x-data="{ 
    authState: null,
    words: [],
    animatedWords: [], 
    showSubtitle: false,
    init() {
        // Function to set up title animation
        const setupTitle = (authState) => {
            const firstName = (authState && authState.firstName) || 'there';
            const title = authState && authState.isLoggedIn
                ? `Welcome back, ${firstName}. `
                : 'Blue is a powerful platform to create, manage, and scale processes.';
                
            this.words = title.split(' ');
            this.animatedWords = [];
            this.showSubtitle = false;
            
            // Animate words
            this.words.forEach((word, i) => setTimeout(() => this.animatedWords.push(i), i * 80)); 
            setTimeout(() => this.showSubtitle = true, 100);
        };
        
        // Initial setup with null state
        setupTitle(null);
        
        // Subscribe to auth state changes if available
        if (window.AuthStateManager) {
            this.unsubscribe = window.AuthStateManager.subscribe((authState) => {
                // Only re-animate if state actually changed
                if (JSON.stringify(authState) !== JSON.stringify(this.authState)) {
                    this.authState = authState;
                    setupTitle(authState);
                }
            });
        } else {
            // Try again after a short delay in case AuthStateManager loads later
            setTimeout(() => {
                if (window.AuthStateManager) {
                    this.unsubscribe = window.AuthStateManager.subscribe((authState) => {
                        if (JSON.stringify(authState) !== JSON.stringify(this.authState)) {
                            this.authState = authState;
                            setupTitle(authState);
                        }
                    });
                }
            }, 100);
        }
    },
    destroy() {
        // Clean up subscription
        if (this.unsubscribe) {
            this.unsubscribe();
        }
    }
}">
    <h1 class="text-4xl md:text-6xl lg:text-6xl font-medium tracking-tight text-gray-900 dark:text-gray-100 mb-3">
        <template x-for="(word, index) in words" :key="index">
            <span 
                :class="animatedWords.includes(index) ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-2'" 
                class="inline-block mr-2 transition-all duration-300 ease-out" 
                x-text="word">
            </span>
        </template>
    </h1>
    <p 
        :class="showSubtitle ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-2'" 
        class="text-xl text-gray-600 dark:text-gray-400 transition-all duration-800 ease-out">
        <span x-show="authState && authState.isLoggedIn">Pick up where you left off or explore what's new in Blue.</span>
        <span x-show="!authState || !authState.isLoggedIn">Meet the system for modern operations — gain visibility, speed up processes, and scale your organization.</span>
    </p>
</div>

    {{template "hero-video" 
        dict 
            "VideoUrl" "/testvideo2.mp4"
            "ShowUnmuteButton" true
            "Id" "homepage"
    }}

    <!-- Hero CTAs -->
    <div class="mt-8 flex flex-col sm:flex-row gap-4 justify-center" x-data="{ 
        authState: null,
        init() {
            // Subscribe to auth state changes
            if (window.AuthStateManager) {
                this.unsubscribe = window.AuthStateManager.subscribe((authState) => {
                    this.authState = authState;
                });
            }
        },
        destroy() {
            // Clean up subscription
            if (this.unsubscribe) {
                this.unsubscribe();
            }
        }
    }">
        <a href="https://app.blue.cc" 
           target="_blank"
           class="inline-flex items-center justify-center px-6 py-3 text-base font-semibold rounded-lg bg-brand-blue text-white hover:bg-brand-blue/90 transition-colors duration-200 shadow-lg hover:shadow-xl group">
            <span x-show="authState && authState.isLoggedIn">Go to Dashboard</span>
            <span x-show="!authState || !authState.isLoggedIn">Get Started Free</span>
            <svg class="ml-2 w-5 h-5 transition-transform duration-200 ease-out group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
            </svg>
        </a>
        <a :href="authState && authState.isLoggedIn ? '/platform/changelog' : '/platform/features'" 
           class="inline-flex items-center justify-center px-6 py-3 text-base font-semibold rounded-lg border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200">
            <span x-show="authState && authState.isLoggedIn">What's New</span>
            <span x-show="!authState || !authState.isLoggedIn">See How It Works</span>
        </a>
    </div>
    
    <!-- News Bar -->
    <div class="mt-8">
        {{$newsBarData := parseJSON `{
            "MainText": "You can now create your own branded version of Blue with the White Label module.",
            "ButtonText": "Learn more",
            "ButtonUrl": "/platform/white-label"
        }`}}
        {{template "news-bar" $newsBarData}}
    </div>
    
  
    {{$logoData := parseJSON `{
        "title": "Trusted by more than 17,000 teams",
        "logos": [
            { "name": "CBRE", "src": "/customers/cbre.svg" },
            { "name": "Cisco", "src": "/customers/cisco.svg" },
            { "name": "Deloitte", "src": "/customers/deloitte.svg" },
            { "name": "FedEx", "src": "/customers/fedex.svg" },
            { "name": "Manulife", "src": "/customers/manulife.svg" },
            { "name": "Red Hat", "src": "/customers/redhat.svg" },
            { "name": "Heineken", "src": "/customers/heineken.svg" },
            { "name": "Sheraton", "src": "/customers/sheraton.svg" },
            { "name": "Columbia University", "src": "/customers/columbia-university.webp" },
            { "name": "Save the Children", "src": "/customers/savethechildren.svg" },
            { "name": "World Food Programme", "src": "/customers/wfp.svg" },
            { "name": "ILO", "src": "/customers/ilo.webp" }
        ]
    }`}}
    
    {{template "logo-grid" $logoData}}

    {{$valuePropsData := parseJSON `{
        "Title": "Designed to turn everything<br> into a clear process.",
        "Description": "Because great organizations thrive on clear, repeatable processes.",
        "ValueProps": [
            {
                "Title": "Built for how you actually work",
                "Description": "Your processes with no forced workflows or rigid structures."
            },
            {
                "Title": "A platform for customers, not investors",
                "Description": "Founder-led, profitable, and built for decades not quarters."
            },
            {
                "Title": "Fair pricing that scales with you",
                "Description": "$7/user. No surprises. Save 90% vs enterprise tools."
            }
        ]
    }`}}
    
    {{template "value-propositions" $valuePropsData}}



<!-- Features as Benefits Section -->
<section class="max-w-7xl mx-auto">
    <h3 class="text-3xl md:text-4xl font-medium tracking-tight text-gray-900 mb-16">Work — the way it should be.</h3>
    
    <!-- One source of truth -->
    <div class="mb-20">
        {{$automateData := parseJSON `{
            "Title": "One source of truth.",
            "Description": "Create records for all your business data, so you finally have one place to keep everything.",
            "VideoUrl": "/testvideo2.mp4",
            "VideoPosition": "left",
            "SeeAlso": {
                "Links": [
                    {
                        "Text": "Records",
                        "Url": "/platform/features/records",
                        "Description": "map to your business entities"
                    },
                    {
                        "Text": "Custom fields",
                        "Url": "/platform/features/custom-fields",
                        "Description": "model your data"
                    },
                    {
                        "Text": "Workspaces",
                        "Url": "/platform/features/workspaces",
                        "Description": "keep everything private with the right links"
                    }
                ]
            }
        }`}}
        {{template "feature-video" $automateData}}
    </div>

     <!-- See Everything, Miss Nothing -->
     <div class="mb-20">
        {{$seeEverythingData := parseJSON `{
            "Title": "Everything is a process.",
            "Description": "Blue helps you create clear, repeatable processes for everything you do.",
            "VideoUrl": "/testvideo2.mp4",
            "VideoPosition": "right",
            "SeeAlso": {
                "Links": [
                    {
                        "Text": "Lists",
                        "Url": "/docs/records/lists",
                        "Description": "create consistent process steps"
                    },
                    {
                        "Text": "Checklists",
                        "Url": "/insights/create-checklist-templates",
                        "Description": "ensure everyone knows what to do"
                    },
                    {
                        "Text": "Forms",
                        "Url": "/platform/features/forms",
                        "Description": "give you consistent data intake"
                    }
                ]
            }
        }`}}
        {{template "feature-video" $seeEverythingData}}
    </div>
   
    <!-- Create Clear Process -->
    <div class="mb-20">
        {{$automateData := parseJSON `{
            "Title": "Automations help you scale.",
            "Description": "Blue's powerful automation engine handles everything from status updates and notifications to complex multi-step workflows.",
            "VideoUrl": "https://media.blue.cc/automations-on-off.mp4",
            "VideoPosition": "left"
        }`}}
        {{template "feature-video" $automateData}}
    </div>


   

    

    <section class="mb-16">
                    
                    {{$statsData := parseJSON `{
                        "Title": "Crafted to operate at scale.",
                        "Stats": [
                            {
                                "Number": "17000+",
                                "Description": "teams worldwide"
                            },
                            {
                                "Number": "5M+",
                                "Description": "processes automated"
                            },
                            {
                                "Number": "500M+",
                                "Description": "records managed"
                            }
                        ]
                    }`}}
                    
                    {{template "stats-section" $statsData}}
    </section>

    {{$testimonialData := parseJSON `{
        "testimonials": [
            {
                "quote": "Blue keeps things completely organised — it's an absolutely wonderful tool.",
                "videoUrl": "https://media.blue.cc/davidzack-testimonial.mp4",
                "posterUrl": "/testimonials/davidsacks.jpeg"
            },
            {
                "quote": "The automation features of Blue help us run our operations seamlessly.",
                "videoUrl": "https://media.blue.cc/lady.mp4",
                "posterUrl": "/testimonials/lady.jpg"
            },
            {
                "quote": "My entire life is in Blue! I love how fantasticly responsive the team is.",
                "videoUrl": "https://media.blue.cc/ricklews-testimonial.mov",
                "posterUrl": "/testimonials/ricklewis.jpg"
            },
            {
                "quote": "If you're wondering if you should buy Blue...the answer is YES.",
                "videoUrl": "https://media.blue.cc/ana.mov",
                "posterUrl": "/testimonials/ana-testimonial.jpg"
            }
        ]
    }`}}

    {{template "testimonial-videos" $testimonialData}}


    <!-- Your Data, Your Way -->
    <div class="mb-20">
        {{$yourDataData := parseJSON `{
            "Title": "Your perfect data structure.",
            "Description": "Create custom fields, design your own record types, and build the perfect database that fits your exact workflow.",
            "VideoUrl": "https://media.blue.cc/custom-fields-showcase.mp4",
            "VideoPosition": "right"
        }`}}
        {{template "feature-video" $yourDataData}}
    </div>

    <!-- Insights That Drive Action -->
    <div class="mb-20">
        {{$insightsData := parseJSON `{
            "Title": "Real-time management dashboards.",
            "Description": "Easily build dashboards that automatically update as your data changes.",
            "VideoUrl": "https://media.blue.cc/dashboard-showcase.mp4",
            "VideoPosition": "left"
        }`}}
        {{template "feature-video" $insightsData}}
    </div>
</section>

<!-- Likely need a unique integrations area here with various logos.-->

    <!-- Features Grid Section -->
    {{$featuresData := parseJSON `{
        "Title": "Everything you need to succeed",
        "Features": [
            {   
                "Title": "Security",
                "Description": "Enterprise-grade security with end-to-end encryption and compliance certifications.",
                "Url": "/platform/security"
            },
            {
                "Title": "Performance",
                "Description": "Lightning-fast response times and 99.9% uptime guarantee for mission-critical work.",
                "Url": "/platform/performance"
            },
            {
                "Title": "Analytics",
                "Description": "Real-time insights and customizable dashboards to track what matters most."
            },
            {
                "Title": "Integrations",
                "Description": "Connect with 7,000+ tools including Slack, Gmail, Zapier, and custom APIs.",
                "Url": "/platform/integrations"
            },
            {
                "Title": "Automations",
                "Description": "Streamline workflows with intelligent automation that learns from your processes."
            },
            {
                "Title": "Mobile Apps",
                "Description": "Work on the go with apps for iPhone, iPad, and Android devices."
            },
            {
                "Title": "Collaboration",
                "Description": "Real-time collaboration tools with comments, mentions, and team workspaces."
            },
            {
                "Title": "Customization",
                "Description": "Fully customizable interface, fields, and workflows to match your business needs."
            },
            {
                "Title": "Support",
                "Description": "Free email support with optional paid phone support."
            }
        ]
    }`}}
    
    {{template "features-grid-simple" $featuresData}}
       
 <!-- Integration Partners -->
 <div class="mb-16">
    {{$integrationData := parseJSON `{
        "title": "Connect with 7,000+ tools through our integration partners",
        "logos": [
            { "name": "Zapier", "src": "/images/zapier.svg" },
            { "name": "Make.com", "src": "/images/make.svg" },
            { "name": "Pabbly Connect", "src": "/images/pabbly.svg" },
            { "name": "Albato", "src": "/images/albato.png" },
            { "name": "Boost.space", "src": "/images/boost-space.svg" }
        ]
    }`}}
    {{template "logo-grid" $integrationData}}
</div>


<!-- Interactive Feature Showcase Section 

I wonder if process management is really needed, is that a "use case"? -->
<section class="mb-8">
        
    {{$showcaseData := parseJSON `{
        "Title": "Selected use cases.",
        "Features": [
            {
                "Id": "process-management",
                "Title": "Process Management", 
                "VideoUrl": "/video3.mp4"
            },
            {
                "Id": "project-management",
                "Title": "Project Management",
                "ImageUrl": "https://www.blue.cc/product/simple-screenshot-home.png"
            },
            {
                "Id": "sales-crm",
                "Title": "Sales CRM",
                "VideoUrl": "/video4.mp4"
            },
            {
                "Id": "service-tickets",
                "Title": "Service Tickets",
                "ImageUrl": "https://www.blue.cc/product/simple-screenshot-home.png"
            },
            {
                "Id": "asset-management",
                "Title": "Asset Management",
                "VideoUrl": "/testvideo2.mp4"
            },
            {
                "Id": "content-calendar",
                "Title": "Content Calendar",
                "ImageUrl": "https://www.blue.cc/product/simple-screenshot-home.png"
            }
        ]
    }`}}
    
    {{template "interactive-feature-showcase" $showcaseData}}
</section>

   <!-- Testimonial Section -->
   <div class="mb-20 px-6 lg:px-8">
    {{template "testimonial-single" 
        dict 
            "ImageUrl" "/testimonials/kyriacos.jpeg"
            "Quote" "Blue has massively helped us manage our data work, ensuring that our teams are clear on what they need to do, and why. It's a great tool for us."
            "Name" "Kyriacos Koupparis, PhD"
            "Title" "Head of Unit, Early Warning and Forecasting, World Food Programme."
    }}
</div>

<!-- Call to Action -->
{{$ctaData := parseJSON `{
    "Title": "Ready to get started?",
    "SecondaryText": "Request a demo",
    "SecondaryUrl": "/contact",
    "PrimaryText": "Get started",
    "PrimaryUrl": "https://app.blue.cc"
}`}}

{{template "dual-button-cta" $ctaData}}

