---
title: Hapus Pengguna
description: Hapus pengguna dari proyek atau perusahaan menggunakan Blue API.
---

## Hapus Pengguna

Halaman ini menjelaskan cara menghapus pengguna dari proyek dan perusahaan. Penghapusan pengguna adalah tindakan permanen yang menghapus penugasan pengguna dari semua catatan dan menghilangkan akses mereka, meskipun data historis mereka tetap dipertahankan untuk tujuan audit.

## Hapus Pengguna dari Proyek

Hapus pengguna dari proyek tertentu sambil mempertahankan akses perusahaan mereka.

### Contoh Dasar

```graphql
mutation {
  removeProjectUser(
    input: {
      projectId: "project-id"
      userId: "user-id"
    }
  ) {
    success
    operationId
  }
}
```

### Contoh Respons

```json
{
  "data": {
    "removeProjectUser": {
      "success": true,
      "operationId": null
    }
  }
}
```

**Catatan:** Bidang `operationId` saat ini tidak diisi oleh mutasi ini dan akan mengembalikan `null`.

## Hapus Pengguna dari Perusahaan

Hapus pengguna dari seluruh perusahaan, yang berdampak pada semua proyek.

### Contoh Dasar

```graphql
mutation {
  removeCompanyUser(
    input: {
      companyId: "company-id"
      userId: "user-id"
    }
  )
}
```

### Contoh Respons

```json
{
  "data": {
    "removeCompanyUser": true
  }
}
```

## Parameter Input

### RemoveProjectUserInput

| Parameter | Tipe | Diperlukan | Deskripsi |
|-----------|------|------------|-----------|
| `projectId` | String! | ✅ Ya | ID proyek (bukan slug) |  |
| `userId` | String! | ✅ Ya | ID pengguna yang akan dihapus |  |

### RemoveCompanyUserInput

| Parameter | Tipe | Diperlukan | Deskripsi |
|-----------|------|------------|-----------|
| `companyId` | String! | ✅ Ya | ID atau slug perusahaan |  |
| `userId` | String! | ✅ Ya | ID pengguna yang akan dihapus |  |

## Bidang Respons

### Respons RemoveProjectUser

| Bidang | Tipe | Deskripsi |
|--------|------|-----------|
| `success` | Boolean! | Apakah operasi berhasil |  |
| `operationId` | String | Pengidentifikasi unik untuk operasi (saat ini mengembalikan `null`) |  |

### Respons RemoveCompanyUser

Mutasi `removeCompanyUser` mengembalikan nilai `Boolean` yang sederhana:
- `true` - Pengguna berhasil dihapus

## Izin yang Diperlukan

### Penghapusan Pengguna Proyek

| Peran | Dapat Menghapus Pengguna |
|-------|--------------------------|
| `OWNER` | ✅ Ya |  |
| `ADMIN` | ✅ Ya |  |
| `MEMBER` | ❌ Tidak |  |
| `READ_ONLY` | ❌ Tidak |  |

**Catatan Penting:**
- Anda tidak dapat menghapus pengguna dengan peran `OWNER` dari proyek
- Sistem mencegah penghapusan pemilik proyek untuk menjaga integritas kepemilikan proyek

### Penghapusan Pengguna Perusahaan

| Peran | Dapat Menghapus Pengguna |
|-------|--------------------------|
| `OWNER` | ✅ Ya |  |
| `ADMIN` | ❌ Tidak |  |
| `MEMBER` | ❌ Tidak |  |
| `READ_ONLY` | ❌ Tidak |  |

**Catatan:** Hanya pemilik perusahaan yang dapat menghapus pengguna dari perusahaan. Resolver menerapkan akses ketat hanya untuk PEMILIK untuk operasi penghapusan pengguna perusahaan.

## Efek Samping

### Penghapusan Proyek
- Menghapus semua penugasan todo untuk pengguna di proyek tersebut
- Menghapus folder proyek pengguna
- Menghapus hubungan pengguna proyek
- Mengirim pembaruan waktu nyata untuk memberitahu pengguna lain
- Membuat entri log audit

### Penghapusan Perusahaan
- **Penghapusan berantai di semua proyek:**
  - Menghapus semua penugasan todo di semua proyek perusahaan
  - Menghapus semua folder pengguna proyek
  - Menghapus pengguna dari semua proyek perusahaan
- Menghapus folder pengguna perusahaan
- Menghapus pengguna dari perusahaan
- Mengirim email pemberitahuan penghapusan kepada pengguna yang dihapus
- **Memperbarui penagihan (jika harga per pengguna):**
  - Menghitung ulang jumlah pengguna aktif
  - Memperbarui jumlah langganan Stripe
- Membuat entri log audit

## Respons Kesalahan

### Proyek Tidak Ditemukan
```json
{
  "errors": [{
    "message": "Project was not found.",
    "extensions": {
      "code": "PROJECT_NOT_FOUND"
    }
  }]
}
```

### Pengguna Tidak Ditemukan
```json
{
  "errors": [{
    "message": "User was not found.",
    "extensions": {
      "code": "USER_NOT_FOUND"
    }
  }]
}
```

### Kesalahan Tidak Sah
```json
{
  "errors": [{
    "message": "You are not authorized.",
    "extensions": {
      "code": "FORBIDDEN"
    }
  }]
}
```

### Perusahaan Tidak Ditemukan (hanya removeCompanyUser)
```json
{
  "errors": [{
    "message": "Company was not found.",
    "extensions": {
      "code": "COMPANY_NOT_FOUND"
    }
  }]
}
```

Kesalahan ini terjadi ketika:
- Anda tidak memiliki peran yang diperlukan (PEMILIK/ADMIN untuk proyek, PEMILIK untuk perusahaan)
- Anda mencoba menghapus PEMILIK proyek
- Pengguna bukan bagian dari proyek/perusahaan

## Pertimbangan Penting

- **Pelestarian Data**: Penghapusan pengguna tidak dapat dibalik. Meskipun pengguna kehilangan akses, data historis mereka (komentar, log aktivitas, dll.) tetap dipertahankan untuk tujuan audit.
- **Perlindungan Pemilik**: Pemilik proyek tidak dapat dihapus dari proyek. Alihkan kepemilikan terlebih dahulu jika diperlukan.
- **Dampak Penagihan**: Penghapusan pengguna perusahaan secara otomatis memperbarui langganan Anda jika Anda menggunakan harga per pengguna.
- **Pemberitahuan Email**: Penghapusan perusahaan mengirimkan email pemberitahuan kepada pengguna yang dihapus.
- **Efek Cascade**: Penghapusan perusahaan mempengaruhi semua proyek, sedangkan penghapusan proyek terbatas pada proyek tertentu tersebut.

## Operasi Terkait

- [Daftar Pengguna](/api/user-management/list-users) - Lihat pengguna sebelum penghapusan
- [Ambil Peran Kustom](/api/user-management/retrieve-custom-role) - Periksa izin pengguna
- [Buat Proyek](/api/projects/create-project) - Tambahkan pengguna ke proyek baru