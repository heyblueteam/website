---
title: Теги
description: Создавайте, управляйте и используйте теги для категоризации записей с помощью Blue API.
---

## Обзор

Теги — это мощный способ категоризировать и организовывать записи в Blue. Система тегов предоставляет обширные функции для создания, управления и фильтрации тегов, с поддержкой массовых операций и расширенной фильтрации.

## Список тегов

Получите теги из проектов с гибкими параметрами фильтрации и сортировки.

### Простой пример

```graphql
query ListTags {
  tagList(
    filter: { 
      projectIds: ["project-123"] 
      excludeArchivedProjects: false 
    }
    first: 50
    orderBy: title_ASC
  ) {
    items {
      id
      uid
      title
      color
      project {
        id
        name
      }
      createdAt
      updatedAt
    }
    pageInfo {
      totalPages
      totalItems
      page
      perPage
      hasNextPage
      hasPreviousPage
    }
    totalCount
  }
}
```

### Пример расширенной фильтрации

```graphql
query FilterTags {
  tagList(
    filter: {
      projectIds: ["project-123", "project-456"]
      search: "urgent"
      colors: ["#ff0000", "#ffaa00"]
      excludeArchivedProjects: true
    }
    orderBy: createdAt_DESC
    first: 20
  ) {
    items {
      id
      title
      color
      todos {
        id
        title
      }
    }
    totalCount
  }
}
```

## Создание тегов

Создайте новые теги в рамках проекта.

```graphql
mutation CreateTag {
  createTag(
    input: {
      title: "High Priority"
      color: "#ff0000"
    }
  ) {
    id
    uid
    title
    color
    project {
      id
      name
    }
    createdAt
  }
}
```

## Обновление тегов

Измените свойства существующих тегов.

```graphql
mutation UpdateTag {
  editTag(
    input: {
      id: "tag-123"
      title: "Critical Priority"
      color: "#cc0000"
    }
  ) {
    id
    title
    color
    updatedAt
  }
}
```

## Удаление тегов

Удалите теги из системы. Это также удалит тег из всех связанных записей.

```graphql
mutation DeleteTag {
  deleteTag(id: "tag-123")
}
```

## Тегирование записей

Ассоциируйте теги с записями (делами) с использованием существующих тегов или создайте новые.

### Использование существующих тегов

```graphql
mutation TagRecord {
  setTodoTags(
    input: {
      todoId: "todo-123"
      tagIds: ["tag-456", "tag-789"]
    }
  )
}
```

### Создание тегов во время тегирования

Вы можете создать новые теги на лету, предоставив названия тегов:

```graphql
mutation TagRecordWithNewTags {
  setTodoTags(
    input: {
      todoId: "todo-123"
      tagIds: ["existing-tag-id"]
      tagTitles: ["New Tag", "Another New Tag"]
    }
  )
}
```

## AI Предложения тегов

Получите предложения тегов на основе ИИ для записи:

```graphql
mutation GetTagSuggestions {
  aiTag(
    input: {
      todoId: "todo-123"
      suggestionsCount: 5
    }
  ) {
    suggestions {
      title
      confidence
      color
    }
  }
}
```

## Входные параметры

### TagListFilter

| Параметр | Тип | Обязательный | Описание |
|-----------|------|----------|-------------|
| `projectIds` | [String!] | Нет | Фильтровать теги по ID проектов или слагам |  |
| `excludeArchivedProjects` | Boolean | Нет | Исключить теги из архивированных проектов |  |
| `search` | String | Нет | Искать названия тегов (без учета регистра) |  |
| `titles` | [String!] | Нет | Фильтровать по конкретным названиям тегов |  |
| `colors` | [String!] | Нет | Фильтровать по конкретным цветам (в шестнадцатеричном формате) |  |
| `tagIds` | [String!] | Нет | Фильтровать по конкретным ID тегов |  |

### CreateTagInput

| Параметр | Тип | Обязательный | Описание |
|-----------|------|----------|-------------|
| `title` | String | Нет | Название тега (автоматически сгенерировано, если не указано) |  |
| `color` | String! | ✅ Да | Цвет тега в шестнадцатеричном формате (например, "#ff0000") |  |

### EditTagInput

| Параметр | Тип | Обязательный | Описание |
|-----------|------|----------|-------------|
| `id` | String! | ✅ Да | ID тега для обновления |  |
| `title` | String | Нет | Новое название тега |  |
| `color` | String | Нет | Новый цвет тега в шестнадцатеричном формате |  |

### SetTodoTagsInput

| Параметр | Тип | Обязательный | Описание |
|-----------|------|----------|-------------|
| `todoId` | String! | ✅ Да | ID записи для тегирования |  |
| `tagIds` | [String!] | Нет | ID существующих тегов для применения |  |
| `tagTitles` | [String!] | Нет | Названия новых тегов для создания и применения |  |

### TagOrderByInput Значения

| Значение | Описание |
|-------|-------------|
| `id_ASC` / `id_DESC` | Сортировать по ID тега |  |
| `uid_ASC` / `uid_DESC` | Сортировать по уникальному идентификатору |  |
| `title_ASC` / `title_DESC` | Сортировать по алфавиту по названию |  |
| `color_ASC` / `color_DESC` | Сортировать по значению цвета |  |
| `createdAt_ASC` / `createdAt_DESC` | Сортировать по дате создания |  |
| `updatedAt_ASC` / `updatedAt_DESC` | Сортировать по дате последнего обновления |  |

## Поля ответа

### Тип тега

| Поле | Тип | Описание |
|-------|------|-------------|
| `id` | ID! | Уникальный идентификатор для тега |  |
| `uid` | String! | Удобный для пользователя уникальный идентификатор |  |
| `title` | String! | Название/имя тега |  |
| `color` | String! | Цвет тега в шестнадцатеричном формате |  |
| `project` | Project! | Проект, к которому принадлежит этот тег |  |
| `todos` | [Todo!]! | Записи, связанные с этим тегом |  |
| `createdAt` | DateTime! | Когда тег был создан |  |
| `updatedAt` | DateTime! | Когда тег был последний раз обновлен |  |

### Ответ TagPagination

| Поле | Тип | Описание |
|-------|------|-------------|
| `items` | [Tag!]! | Массив записей тегов |  |
| `pageInfo` | PageInfo! | Информация о пагинации |  |
| `totalCount` | Int! | Общее количество тегов, соответствующих фильтрам |  |

### Поля PageInfo

| Поле | Тип | Описание |
|-------|------|-------------|
| `totalPages` | Int | Общее количество страниц |  |
| `totalItems` | Int | Общее количество элементов на всех страницах |  |
| `page` | Int | Номер текущей страницы |  |
| `perPage` | Int | Количество элементов на странице |  |
| `hasNextPage` | Boolean! | Есть ли следующая страница |  |
| `hasPreviousPage` | Boolean! | Есть ли предыдущая страница |  |

## Необходимые разрешения

### Управление тегами

| Действие | Необходимая роль |
|--------|--------------|
| Create tags | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |
| Edit tags | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |
| Delete tags | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |
| Apply tags to records | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |

### Видимость тегов

Теги видимы для всех пользователей, имеющих доступ к проекту, в котором был создан тег. Фильтрация на основе ролей может применяться для определенных операций.

## Ответы об ошибках

### Тег не найден
```json
{
  "errors": [{
    "message": "Tag not found",
    "extensions": {
      "code": "NOT_FOUND"
    }
  }]
}
```

### Неверный формат цвета
```json
{
  "errors": [{
    "message": "Color must be in hex format (e.g., #ff0000)",
    "extensions": {
      "code": "BAD_USER_INPUT"
    }
  }]
}
```

### Доступ запрещен
```json
{
  "errors": [{
    "message": "You do not have permission to modify tags in this project",
    "extensions": {
      "code": "FORBIDDEN"
    }
  }]
}
```

### Запись не найдена
```json
{
  "errors": [{
    "message": "Todo not found",
    "extensions": {
      "code": "NOT_FOUND"
    }
  }]
}
```

## Рекомендации по лучшим практикам

1. **Используйте согласованные цвета**: Установите систему цветового кодирования для вашей команды
2. **Описательные названия**: Используйте четкие, описательные названия тегов, которые будут понятны членам команды
3. **Пакетные операции**: Используйте `setTodoTags` для применения нескольких тегов одновременно
4. **Поиск и фильтрация**: Используйте функциональность поиска, чтобы находить существующие теги перед созданием новых
5. **Управление тегами**: Регулярно просматривайте и очищайте неиспользуемые теги
6. **Цветовые соглашения**: Рассмотрите возможность использования стандартных цветов для общих типов тегов (красный для срочных, зеленый для завершенных и т. д.)

## Расширенные функции

### Значения по умолчанию для создания тегов

- Новые теги, созданные через `setTodoTags` с `tagTitles`, по умолчанию имеют цвет `#4a9fff`
- Теги без указанных цветов возвращаются к `#00a0d2`
- Названия тегов автоматически очищаются от пробелов

### Интеграция автоматизации

Теги могут быть:
- Автоматически применены правилами автоматизации
- Использованы в качестве триггеров для рабочих процессов автоматизации
- Изменены через действия автоматизации

### Обновления в реальном времени

Изменения тегов транслируются через подписки GraphQL, что позволяет получать обновления в реальном времени в подключенных клиентах.

## Важные заметки

- Удаление тега удаляет его из всех связанных записей
- Теги имеют область действия проекта и не могут быть общими между проектами
- Цветовые значения должны быть действительными шестнадцатеричными кодами (например, "#ff0000", "#00aa00")
- Названия тегов чувствительны к регистру
- Максимум 100 тегов может быть применено к одной записи
- Теги поддерживают полнотекстовый поиск по названиям