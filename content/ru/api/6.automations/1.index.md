---
title: Список всех автоматизаций
description: Получите пагинированный список автоматизаций для проекта с параметрами фильтрации
---

## Список всех автоматизаций

Автоматизации в Blue позволяют создавать мощные рабочие процессы, которые запускают действия на основе определенных событий. Этот конечный пункт получает все автоматизации, настроенные для вашего проекта, включая их триггеры, действия и текущее состояние.

### Основной пример

```graphql
query ListAutomations {
  automationList {
    items {
      id
      isActive
      trigger {
        type
        color
      }
      actions {
        type
        color
      }
      createdAt
    }
    pageInfo {
      totalItems
      hasNextPage
    }
  }
}
```

### Расширенный пример

```graphql
query ListAutomationsAdvanced {
  automationList(
    filter: {
      customFieldIds: ["field_123", "field_456"]
    }
    skip: 0
    take: 50
  ) {
    items {
      id
      isActive
      createdAt
      updatedAt
      
      # Trigger details
      trigger {
        id
        type
        color
        metadata {
          ... on AutomationTriggerMetadataTodoOverdue {
            incompleteOnly
          }
        }
        customField {
          id
          name
          type
        }
        customFieldOptions {
          id
          title
          color
        }
        todoList {
          id
          title
        }
        tags {
          id
          title
          color
        }
        assignees {
          id
          name
          email
        }
      }
      
      # Action details
      actions {
        id
        type
        color
        duedIn
        assigneeTriggerer
        
        # Action-specific fields
        customField {
          id
          name
        }
        customFieldOptions {
          id
          title
        }
        todoList {
          id
          title
        }
        tags {
          id
          title
        }
        assignees {
          id
          name
        }
        
        # Email action metadata
        metadata {
          ... on AutomationActionMetadataSendEmail {
            email {
              subject
              to
              from
              content
            }
          }
          ... on AutomationActionMetadataCreateChecklist {
            checklists {
              title
              checklistItems {
                title
                duedIn
              }
            }
          }
        }
      }
      
      # Creator info
      createdBy {
        id
        name
        email
      }
    }
    
    pageInfo {
      totalItems
      totalPages
      hasNextPage
      hasPreviousPage
    }
    
    totalCount
  }
}
```

## Входные параметры

### AutomationFilterInput

| Параметр | Тип | Обязательный | Описание |
|-----------|------|----------|-------------|
| `customFieldIds` | [String] | Нет | Фильтровать автоматизации, связанные с конкретными пользовательскими полями |  |

### Параметры пагинации

| Параметр | Тип | Обязательный | Описание |
|-----------|------|----------|-------------|
| `skip` | Int | Нет | Количество элементов для пропуска (по умолчанию: 0) |  |
| `take` | Int | Нет | Количество элементов для возврата (по умолчанию: 20) |  |

## Поля ответа

### AutomationPagination

| Поле | Тип | Описание |
|-------|------|-------------|
| `items` | [Automation!]! | Список объектов автоматизации |  |
| `pageInfo` | PageInfo! | Информация о пагинации |  |
| `totalCount` | Int! | Общее количество автоматизаций |  |

### Automation

| Поле | Тип | Описание |
|-------|------|-------------|
| `id` | ID! | Уникальный идентификатор |  |
| `trigger` | AutomationTrigger! | Событие, которое запускает эту автоматизацию |  |
| `actions` | [AutomationAction!]! | Действия, выполняемые при срабатывании |  |
| `isActive` | Boolean! | Активна ли автоматизация в данный момент |  |
| `createdBy` | User! | Пользователь, создавший автоматизацию |  |
| `project` | Project! | Проект, к которому принадлежит эта автоматизация |  |
| `createdAt` | DateTime! | Время создания |  |
| `updatedAt` | DateTime! | Время последнего обновления |  |

### AutomationTrigger

| Поле | Тип | Описание |
|-------|------|-------------|
| `id` | ID! | Уникальный идентификатор |  |
| `type` | AutomationTriggerType! | Тип события триггера |  |
| `color` | String | Связанный цвет (в формате hex) |  |
| `metadata` | AutomationTriggerMetadata | Конфигурация, специфичная для триггера |  |
| `customField` | CustomField | Связанное пользовательское поле (если применимо) |  |
| `customFieldOptions` | [CustomFieldOption!] | Выбранные параметры для полей выбора |  |
| `todos` | [CustomFieldReferenceTodo!] | Ссылочные задачи |  |
| `todoList` | TodoList | Связанный список задач |  |
| `tags` | [Tag!] | Связанные теги |  |
| `assignees` | [User!] | Связанные исполнители |  |

### AutomationAction

| Поле | Тип | Описание |
|-------|------|-------------|
| `id` | ID! | Уникальный идентификатор |  |
| `type` | AutomationActionType! | Тип действия, которое нужно выполнить |  |
| `color` | String | Связанный цвет (в формате hex) |  |
| `duedIn` | Int | Дни, которые нужно добавить для действий с датой выполнения |  |
| `assigneeTriggerer` | String | Идентификатор специального исполнителя |  |
| `metadata` | AutomationActionMetadata | Конфигурация, специфичная для действия |  |
| `customField` | CustomField | Целевое пользовательское поле |  |
| `customFieldOptions` | [CustomFieldOption!] | Параметры для полей выбора |  |
| `todoList` | TodoList | Целевой список задач |  |
| `tags` | [Tag!] | Теги для добавления/удаления |  |
| `assignees` | [User!] | Исполнители для добавления/удаления |  |
| `httpOption` | AutomationActionHttpOption | Конфигурация HTTP-запроса |  |

## Типы триггеров

| Тип | Описание |
|------|-------------|
| `TODO_CREATED` | Когда создается новая запись |  |
| `TODO_LIST_CHANGED` | Когда запись перемещается между списками |  |
| `TODO_MARKED_AS_COMPLETE` | Когда запись завершается |  |
| `TODO_MARKED_AS_INCOMPLETE` | Когда запись становится незавершенной |  |
| `ASSIGNEE_ADDED` | Когда добавляется исполнитель |  |
| `ASSIGNEE_REMOVED` | Когда исполнитель удаляется |  |
| `DUE_DATE_CHANGED` | Когда изменяется дата выполнения |  |
| `DUE_DATE_REMOVED` | Когда дата выполнения очищается |  |
| `DUE_DATE_EXPIRED` | Когда дата выполнения истекает |  |
| `TAG_ADDED` | Когда добавляется тег |  |
| `TAG_REMOVED` | Когда тег удаляется |  |
| `CHECKLIST_ITEM_MARKED_AS_DONE` | Когда элемент контрольного списка завершается |  |
| `CHECKLIST_ITEM_MARKED_AS_UNDONE` | Когда элемент контрольного списка становится незавершенным |  |
| `TODO_COPIED_OR_MOVED_FROM_OTHER_PROJECT` | Когда запись импортируется |  |
| `CUSTOM_FIELD_ADDED` | Когда устанавливается значение пользовательского поля |  |
| `CUSTOM_FIELD_REMOVED` | Когда значение пользовательского поля очищается |  |
| `CUSTOM_FIELD_BUTTON_CLICKED` | Когда нажимается поле кнопки |  |
| `COLOR_ADDED` | Когда применяется цвет |  |
| `COLOR_REMOVED` | Когда цвет удаляется |  |

## Типы действий

| Тип | Описание |
|------|-------------|
| `CHANGE_TODO_LIST` | Переместить запись в другой список |  |
| `MARK_AS_COMPLETE` | Завершить запись |  |
| `MARK_AS_INCOMPLETE` | Сделать запись незавершенной |  |
| `ADD_ASSIGNEE` | Добавить исполнителя(ей) |  |
| `REMOVE_ASSIGNEE` | Удалить исполнителя(ей) |  |
| `ADD_ASSIGNEE_TRIGGERER` | Добавить пользователя, который запустил автоматизацию |  |
| `CHANGE_DUE_DATE` | Установить или обновить дату выполнения |  |
| `REMOVE_DUE_DATE` | Очистить дату выполнения |  |
| `ADD_TAG` | Применить тег(и) |  |
| `REMOVE_TAG` | Удалить тег(и) |  |
| `ADD_COLOR` | Применить цвет |  |
| `REMOVE_COLOR` | Удалить цвет |  |
| `ADD_CUSTOM_FIELD` | Установить значение пользовательского поля |  |
| `REMOVE_CUSTOM_FIELD` | Очистить значение пользовательского поля |  |
| `CREATE_CHECKLIST` | Создать новый контрольный список |  |
| `MARK_CHECKLIST_ITEM_AS_DONE` | Завершить элементы контрольного списка |  |
| `MARK_CHECKLIST_ITEM_AS_UNDONE` | Сделать элементы контрольного списка незавершенными |  |
| `COPY_TODO` | Дублировать запись |  |
| `SEND_EMAIL` | Отправить уведомление по электронной почте |  |
| `GENERATE_PDF` | Сгенерировать PDF-документ |  |
| `MAKE_HTTP_REQUEST` | Вызвать внешний API |  |

## Требуемые разрешения

Список автоматизаций требует аутентификации и доступа к проекту:

| Роль | Может просматривать автоматизации |
|------|---------------------|
| `OWNER` | ✅ Да |  |
| `ADMIN` | ✅ Да |  |
| `MEMBER` | ✅ Да |  |
| `CLIENT` | ✅ Да |  |

Все аутентифицированные пользователи с доступом к проекту могут просматривать автоматизации.

## Ответы на ошибки

### Требуется аутентификация
```json
{
  "errors": [{
    "message": "You must be logged in",
    "extensions": {
      "code": "UNAUTHENTICATED"
    }
  }]
}
```

### Проект не найден
```json
{
  "errors": [{
    "message": "Project not found",
    "extensions": {
      "code": "PROJECT_NOT_FOUND"
    }
  }]
}
```

## Важные заметки

- **Порядок**: Автоматизации всегда возвращаются в порядке новизны (по дате создания)
- **Область проекта**: Автоматизации ограничены текущим контекстом проекта
- **Активный статус**: Проверьте `isActive`, чтобы определить, работает ли автоматизация в данный момент
- **Метаданные**: Некоторые триггеры и действия имеют дополнительные метаданные для конфигурации
- **Производительность**: Используйте пагинацию для проектов с большим количеством автоматизаций
- **Фильтрация**: В настоящее время поддерживается только фильтрация по идентификаторам пользовательских полей