---
title: Växla Poststatus
description: Växla en post mellan fullständig och ofullständig status med en enda mutation.
---

## Växla Poststatus

Mutation `updateTodoDoneStatus` ger ett enkelt sätt att växla en posts fullständighetsstatus. Om posten är ofullständig, markerar den den som fullständig. Om den är fullständig, markerar den den som ofullständig.

### Exempel

```graphql
mutation ToggleRecordStatus {
  updateTodoDoneStatus(todoId: "todo_123") {
    id
    title
    done
    updatedAt
  }
}
```

## Indata Parametrar

| Parameter | Typ | Obligatorisk | Beskrivning |
|-----------|------|--------------|-------------|
| `todoId` | String! | ✅ Ja | ID för posten som ska växlas |

## Svar

Returnerar det uppdaterade `Todo` objektet med alla tillgängliga fält. Vanligt förekommande fält inkluderar:

- `id` - Postidentifierare
- `title` - Posttitel
- `done` - Ny fullständighetsstatus (true/false)
- `updatedAt` - Tidsstämpel för uppdateringen
- Alla andra [Todo-fält](/api/records/list-records#todo-fields) är tillgängliga

## Obligatoriska Behörigheter

| Åtkomstnivå | Kan Växla Status |
|--------------|-------------------|
| `OWNER` | ✅ Ja |
| `ADMIN` | ✅ Ja |
| `MEMBER` | ✅ Ja |
| `CLIENT` | ✅ Ja |
| `COMMENT_ONLY` | ❌ Nej |
| `VIEW_ONLY` | ❌ Nej |

**Notera**: Anpassade roller med `allowMarkRecordsAsDone: false` kommer att blockeras från att använda denna mutation.

## Fel Svar

### TodoNotFoundError
```json
{
  "errors": [{
    "message": "Todo was not found.",
    "extensions": {
      "code": "TODO_NOT_FOUND"
    }
  }]
}
```

### UnauthorizedError
```json
{
  "errors": [{
    "message": "You are not authorized.",
    "extensions": {
      "code": "UNAUTHORIZED"
    }
  }]
}
```

## Viktiga Anteckningar

### Bieffekter
Att växla en posts status utlöser flera automatiserade åtgärder:

- **Aktivitetslogg**: Skapar poster för MARK_AS_COMPLETE eller MARK_AS_INCOMPLETE
- **Webhooks**: Skickar meddelanden till konfigurerade webhook-slutpunkter med före/efter tillstånd
- **Automatiseringar**: Utlöser TODO_MARKED_AS_COMPLETE eller TODO_MARKED_AS_INCOMPLETE automatiseringsregler
- **Realtidsnotifikationer**: Skickar uppdateringar till relevanta användare (om konfigurerat)
- **Realtidspublicering**: Publicerar todo-uppdateringar till anslutna klienter
- **Tidsregistrering**: Uppdaterar tidslängd anpassade fält automatiskt
- **Sökindex**: Uppdaterar sökindexet för förbättrad upptäckbarhet
- **Analys**: Uppdaterar diagram och rapporter
- **Aktivitetsflöde**: Fullständiga poster visas i företagets aktivitetsflöde

### Användningstips
- Mutationen är idempotent - att anropa den två gånger återställer posten till sitt ursprungliga tillstånd
- Operationen är atomär - antingen lyckas den helt eller misslyckas utan några förändringar
- Anpassade roller kan begränsa denna åtgärd via `allowMarkRecordsAsDone` behörigheten

### Relaterade Slutpunkter
- **Lista Poster**: Använd `todoQueries.todos` för att fråga och filtrera poster
- **Bulkuppdatering**: Använd `updateTodos` för att modifiera flera poster på en gång