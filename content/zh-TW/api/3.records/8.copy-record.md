---
title: 複製記錄
description: 在保留特定數據元素的同時創建現有記錄的副本。
---

## 複製記錄

要在維持特定元素的同時創建現有記錄的副本，請使用 `copyTodo` 變更：

```graphql
mutation CopyTodo {
  copyTodo(
    input: {
      title: "new todo"
      todoId: "todo-id"
      todoListId: "todo-list-id"
      options: [
        DESCRIPTION
        DUE_DATE
        CHECKLISTS
        ASSIGNEES
        TAGS
        CUSTOM_FIELDS
        COMMENTS
      ]
    }
  )
}
```

### 必需的標頭
```http
x-bloo-token-id: "your-token-id"
x-bloo-token-secret: "your-token-secret" 
x-bloo-project-id: "project-id-or-slug"
x-bloo-company-id: "company-id-or-slug"
```

### 輸入參數

| 欄位 | 類型 | 必需 | 描述 |
|-------|------|----------|-------------|
| title | String | 否 | 複製記錄的新標題（可選） |  |
| todoId | String | 是 | 要複製的記錄的 ID |  |
| todoListId | String | 是 | 要在其中創建副本的列表 ID |  |
| options | Array | 是 | 要從原始記錄中複製的數據元素 |  |

### 複製選項

`options` 陣列接受這些值：

| 選項 | 描述 |
|--------|-------------|
| DESCRIPTION | 複製記錄的描述 |  |
| DUE_DATE | 複製截止日期和時區 |  |
| CHECKLISTS | 複製所有檢查清單及其項目 |  |
| ASSIGNEES | 複製所有分配的用戶（按目標項目成員資格過濾） |  |
| TAGS | 複製所有相關標籤 |  |
| CUSTOM_FIELDS | 複製所有自定義字段值（包括文件附件） |  |
| COMMENTS | 複製所有評論和回覆 |  |

### 示例響應
```json
{
  "data": {
    "copyTodo": true
  }
}
```

::callout
 ---
icon: lightbulb
---
**定位副本** <br/>
複製的記錄將默認放置在目標列表的底部。要控制定位，請使用 [移動記錄變更](/api/records/move-record-list)。
:: 

::callout
---
icon: i-heroicons-exclamation-triangle
---
**所需權限** <br/>
您需要在源項目和目標項目上擁有 **編輯** 權限（擁有者、管理員或成員角色）。**注意**：成員角色用戶只能在同一項目內複製記錄。跨項目複製需要管理員或擁有者權限。失敗的複製將返回 `FORBIDDEN` 錯誤代碼。
::

### 錯誤處理
此操作的常見錯誤代碼：
- `TODO_NOT_FOUND`: 無效或無法訪問的 todoId
- `TODO_LIST_NOT_FOUND`: 無效或無法訪問的 todoListId
- `FORBIDDEN`: 權限不足或跨項目限制

請參閱 [錯誤代碼](/api/error-codes) 獲取完整參考。

## 高級功能

### 跨項目複製
該變更支持在不同項目之間複製記錄，考慮因素如下：
- **擁有者/管理員**：可以在他們有權訪問的任何項目之間複製記錄
- **成員**：僅限於在同一項目內複製
- **分配人過濾**：在跨項目複製時，分配人會自動過濾，只包括有權訪問目標項目的用戶

### 自定義字段處理
使用 `CUSTOM_FIELDS` 選項時：
- 所有自定義字段值都會複製到新記錄中
- 自定義字段中的文件附件將正確複製並帶有新的存儲引用
- 自定義字段類型將被保留並根據目標項目的配置進行驗證

### 自動化集成
跨項目複製可能會觸發源項目和目標項目中的其他自動化規則，允許在項目邊界之間進行複雜的工作流管理。