---
title: 更新記錄
description: 學習如何使用 Blue API 更新記錄詳細信息和自定義字段。
---

## 更新記錄詳細信息

要更新記錄的核心屬性，請使用 `editTodo` 突變：

```graphql
mutation UpdateRecordDetails {
  editTodo(
    input: {
      todoId: "YOUR RECORD ID"
      todoListId: "RECORD LIST ID TO MOVE THE RECORD TO"
      position: "NEW RECORD POSITION IN NUMBER"
      title: "NEW RECORD TITLE"
      html: "NEW RECORD DESCRIPTION IN HTML (MUST MATCH TEXT)"
      text: "NEW RECORD DESCRIPTION IN TEXT (MUST MATCH HTML)"
      startedAt: "NEW RECORD DUE DATE (START)"
      duedAt: "NEW RECORD DUE DATE (END)"
      color: "RECORD COLOR CODE"
    }
  ) {
    id
    title
    position
    html
    text
    color
  }
}
```

### 輸入字段參考
| 字段 | 類型 | 描述 |
|-------|------|-------------|
| todoId | String | （必填）要更新的記錄 ID |  |
| todoListId | String | 如果移動記錄，則為新列表 ID |  |
| position | Float | 列表中的新位置 |  |
| title | String | 更新的記錄標題 |  |
| html/text | String | 更新的描述（必須在兩個字段中匹配） |  |
| startedAt/duedAt | DateTime | 更新的開始/結束日期，格式為 ISO 8601 |  |
| color | String | 從可用選項中選擇的顏色代碼 |  |

### 顏色選項
```json
// Light theme colors
["#ffc2d4", "#ed8285", "#ffb55e", "#ffe885", "#ccf07d", 
 "#91e38c", "#a1f7fa", "#91cfff", "#c29ee0", "#e8bd91"]

// Dark theme colors  
["#ff8ebe", "#ff4b4b", "#ff9e4b", "#ffdc6b", "#b4e051",
 "#66d37e", "#4fd2ff", "#4a9fff", "#a17ee8", "#e89e64"]
```

## 更新自定義字段
要更新自定義字段值，請使用 `setTodoCustomField` 突變，並使用特定於字段的參數：

### 基於文本的字段
```graphql
mutation {
  setTodoCustomField(
    input: {
      customFieldId: "YOUR CUSTOM FIELD ID"
      todoId: "YOUR RECORD ID"
      text: "VALUE"
    }
  ) {
    success
  }
}
```
適用於： `TEXT_SINGLE`, `TEXT_MULTI`, `URL`, `EMAIL`

### 數字字段  
```graphql
mutation {
  setTodoCustomField(
    input: {
      customFieldId: "YOUR CUSTOM FIELD ID"
      todoId: "YOUR RECORD ID" 
      number: "NUMERIC_VALUE"
    }
  ) {
    success
  }
}
```
適用於： `NUMBER`, `CURRENCY`, `PERCENT`, `RATING`

### 選擇字段
```graphql
mutation {
  setTodoCustomField(
    input: {
      customFieldId: "YOUR CUSTOM FIELD ID"
      todoId: "YOUR RECORD ID"
      customFieldOptionIds: ["OPTION_ID_1", "OPTION_ID_2"]
    }
  ) {
    success
  }
}
```
適用於： `SELECT_SINGLE`, `SELECT_MULTI`

### 專用字段
**電話號碼：**
```graphql
mutation {
  setTodoCustomField(
    input: {
      customFieldId: "YOUR CUSTOM FIELD ID"
      todoId: "YOUR RECORD ID"
      text: "+33642526644"
      regionCode: "FR"
    }
  )
}
```

**國家：**
```graphql
mutation {
  setTodoCustomField(
    input: {
      customFieldId: "YOUR CUSTOM FIELD ID"
      todoId: "YOUR RECORD ID"
      countryCodes: ["AF", "AL", "DZ"]
      text: "Afghanistan, Albania, Algeria"
    }
  )
}
```

**位置：**
```graphql
mutation {
  setTodoCustomField(
    input: {
      customFieldId: "YOUR CUSTOM FIELD ID"
      todoId: "YOUR RECORD ID"
      latitude: 42.2923323
      longitude: 12.126621199999999
      text: "Via Cassia, Querce d'Orlando, Capranica, Italy"
    }
  )
}
```

**復選框：**
```graphql
mutation {
  setTodoCustomField(
    input: {
      customFieldId: "YOUR CUSTOM FIELD ID"
      todoId: "YOUR RECORD ID"
      checked: true
    }
  )
}
```

## 所需權限

用戶必須擁有適當的項目訪問權限才能更新記錄：

| 訪問級別 | 可以更新記錄 |
|--------------|-------------------|
| `OWNER` | ✅ 是 |  |
| `ADMIN` | ✅ 是 |  |
| `MEMBER` | ✅ 是 |  |
| `CLIENT` | ✅ 是 |  |
| `COMMENT_ONLY` | ❌ 否 |  |
| `VIEW_ONLY` | ❌ 否 |  |

根據角色配置，可能還適用於 `setTodoCustomField` 的其他自定義字段權限。

## 返回值

- `editTodo` 返回完整的更新 `Todo` 對象
- `setTodoCustomField` 返回 `Boolean!` 表示成功

### 注意事項
1. 自定義字段 ID 可以使用 [列出自定義字段](/api/custom-fields/list-custom-fields) 查詢找到
2. 使用 API 直接時，電話號碼必須為 E.164 格式
3. 位置字段最好通過 Blue 應用界面進行管理
4. 當提供 `html` 時，`html` 和 `text` 字段會自動同步
5. 所有更新操作都會觸發活動日誌和網絡鉤子通知