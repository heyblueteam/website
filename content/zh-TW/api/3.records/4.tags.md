---
title: 標籤
description: 使用 Blue API 創建、管理和使用標籤來對記錄進行分類。
---

## 概述

標籤是對 Blue 中的記錄進行分類和組織的強大方式。標籤系統提供了全面的功能來創建、管理和篩選標籤，支持批量操作和高級篩選。

## 列出標籤

從項目中檢索標籤，具有靈活的篩選和排序選項。

### 基本範例

```graphql
query ListTags {
  tagList(
    filter: { 
      projectIds: ["project-123"] 
      excludeArchivedProjects: false 
    }
    first: 50
    orderBy: title_ASC
  ) {
    items {
      id
      uid
      title
      color
      project {
        id
        name
      }
      createdAt
      updatedAt
    }
    pageInfo {
      totalPages
      totalItems
      page
      perPage
      hasNextPage
      hasPreviousPage
    }
    totalCount
  }
}
```

### 高級篩選範例

```graphql
query FilterTags {
  tagList(
    filter: {
      projectIds: ["project-123", "project-456"]
      search: "urgent"
      colors: ["#ff0000", "#ffaa00"]
      excludeArchivedProjects: true
    }
    orderBy: createdAt_DESC
    first: 20
  ) {
    items {
      id
      title
      color
      todos {
        id
        title
      }
    }
    totalCount
  }
}
```

## 創建標籤

在項目中創建新標籤。

```graphql
mutation CreateTag {
  createTag(
    input: {
      title: "High Priority"
      color: "#ff0000"
    }
  ) {
    id
    uid
    title
    color
    project {
      id
      name
    }
    createdAt
  }
}
```

## 更新標籤

修改現有標籤屬性。

```graphql
mutation UpdateTag {
  editTag(
    input: {
      id: "tag-123"
      title: "Critical Priority"
      color: "#cc0000"
    }
  ) {
    id
    title
    color
    updatedAt
  }
}
```

## 刪除標籤

從系統中刪除標籤。這也會從所有相關記錄中刪除該標籤。

```graphql
mutation DeleteTag {
  deleteTag(id: "tag-123")
}
```

## 標籤記錄

使用現有標籤將標籤與記錄（待辦事項）關聯，或創建新標籤。

### 使用現有標籤

```graphql
mutation TagRecord {
  setTodoTags(
    input: {
      todoId: "todo-123"
      tagIds: ["tag-456", "tag-789"]
    }
  )
}
```

### 在標記時創建標籤

您可以通過提供標籤標題即時創建新標籤：

```graphql
mutation TagRecordWithNewTags {
  setTodoTags(
    input: {
      todoId: "todo-123"
      tagIds: ["existing-tag-id"]
      tagTitles: ["New Tag", "Another New Tag"]
    }
  )
}
```

## AI 標籤建議

獲取記錄的 AI 驅動標籤建議：

```graphql
mutation GetTagSuggestions {
  aiTag(
    input: {
      todoId: "todo-123"
      suggestionsCount: 5
    }
  ) {
    suggestions {
      title
      confidence
      color
    }
  }
}
```

## 輸入參數

### TagListFilter

| 參數 | 類型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `projectIds` | [String!] | 否 | 按項目 ID 或 slug 篩選標籤 |  |
| `excludeArchivedProjects` | Boolean | 否 | 排除已存檔項目的標籤 |  |
| `search` | String | 否 | 搜索標籤標題（不區分大小寫） |  |
| `titles` | [String!] | 否 | 按特定標籤標題篩選 |  |
| `colors` | [String!] | 否 | 按特定顏色篩選（十六進制格式） |  |
| `tagIds` | [String!] | 否 | 按特定標籤 ID 篩選 |  |

### CreateTagInput

| 參數 | 類型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `title` | String | 否 | 標籤標題（如果未提供則自動生成） |  |
| `color` | String! | ✅ 是 | 標籤顏色（十六進制格式，例如 "#ff0000"） |  |

### EditTagInput

| 參數 | 類型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `id` | String! | ✅ 是 | 要更新的標籤 ID |  |
| `title` | String | 否 | 新的標籤標題 |  |
| `color` | String | 否 | 新的標籤顏色（十六進制格式） |  |

### SetTodoTagsInput

| 參數 | 類型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `todoId` | String! | ✅ 是 | 要標記的記錄 ID |  |
| `tagIds` | [String!] | 否 | 要應用的現有標籤 ID |  |
| `tagTitles` | [String!] | 否 | 要創建和應用的新標籤標題 |  |

### TagOrderByInput 值

| 值 | 描述 |
|-------|-------------|
| `id_ASC` / `id_DESC` | 按標籤 ID 排序 |  |
| `uid_ASC` / `uid_DESC` | 按唯一標識符排序 |  |
| `title_ASC` / `title_DESC` | 按標題字母順序排序 |  |
| `color_ASC` / `color_DESC` | 按顏色值排序 |  |
| `createdAt_ASC` / `createdAt_DESC` | 按創建日期排序 |  |
| `updatedAt_ASC` / `updatedAt_DESC` | 按最後更新日期排序 |  |

## 回應字段

### Tag 類型

| 字段 | 類型 | 描述 |
|-------|------|-------------|
| `id` | ID! | 標籤的唯一標識符 |  |
| `uid` | String! | 用戶友好的唯一標識符 |  |
| `title` | String! | 標籤標題/名稱 |  |
| `color` | String! | 標籤顏色（十六進制格式） |  |
| `project` | Project! | 此標籤所屬的項目 |  |
| `todos` | [Todo!]! | 與此標籤相關的記錄 |  |
| `createdAt` | DateTime! | 標籤創建時間 |  |
| `updatedAt` | DateTime! | 標籤最後更新時間 |  |

### TagPagination 回應

| 字段 | 類型 | 描述 |
|-------|------|-------------|
| `items` | [Tag!]! | 標籤記錄的數組 |  |
| `pageInfo` | PageInfo! | 分頁信息 |  |
| `totalCount` | Int! | 符合篩選條件的標籤總數 |  |

### PageInfo 字段

| 字段 | 類型 | 描述 |
|-------|------|-------------|
| `totalPages` | Int | 總頁數 |  |
| `totalItems` | Int | 所有頁面上的項目總數 |  |
| `page` | Int | 當前頁碼 |  |
| `perPage` | Int | 每頁的項目數 |  |
| `hasNextPage` | Boolean! | 是否有下一頁 |  |
| `hasPreviousPage` | Boolean! | 是否有上一頁 |  |

## 所需權限

### 標籤管理

| 操作 | 所需角色 |
|--------|--------------|
| Create tags | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |
| Edit tags | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |
| Delete tags | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |
| Apply tags to records | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |

### 標籤可見性

標籤對所有有權訪問創建標籤的項目的用戶可見。某些操作可能適用基於角色的篩選。

## 錯誤回應

### 標籤未找到
```json
{
  "errors": [{
    "message": "Tag not found",
    "extensions": {
      "code": "NOT_FOUND"
    }
  }]
}
```

### 顏色格式無效
```json
{
  "errors": [{
    "message": "Color must be in hex format (e.g., #ff0000)",
    "extensions": {
      "code": "BAD_USER_INPUT"
    }
  }]
}
```

### 權限被拒絕
```json
{
  "errors": [{
    "message": "You do not have permission to modify tags in this project",
    "extensions": {
      "code": "FORBIDDEN"
    }
  }]
}
```

### 記錄未找到
```json
{
  "errors": [{
    "message": "Todo not found",
    "extensions": {
      "code": "NOT_FOUND"
    }
  }]
}
```

## 最佳實踐

1. **使用一致的顏色**：為您的團隊建立顏色編碼系統
2. **描述性標題**：使用清晰、描述性的標籤名稱，以便團隊成員理解
3. **批量操作**：使用 `setTodoTags` 一次應用多個標籤
4. **搜索和篩選**：在創建新標籤之前，使用搜索功能查找現有標籤
5. **標籤管理**：定期檢查並清理未使用的標籤
6. **顏色約定**：考慮對常見標籤類型使用標準顏色（緊急的紅色、已完成的綠色等）

## 高級功能

### 標籤創建默認值

- 通過 `setTodoTags` 創建的新標籤默認顏色為 `tagTitles`
- 沒有指定顏色的標籤將回退到 `#00a0d2`
- 標籤標題會自動去除空白

### 自動化集成

標籤可以：
- 通過自動化規則自動應用
- 用作自動化工作流的觸發器
- 通過自動化操作進行修改

### 實時更新

標籤更改通過 GraphQL 訂閱進行廣播，允許在連接的客戶端中實時更新。

## 重要說明

- 刪除標籤會將其從所有相關記錄中刪除
- 標籤是項目範圍的，不能跨項目共享
- 顏色值必須是有效的十六進制代碼（例如，"#ff0000"，"#00aa00"）
- 標籤標題區分大小寫
- 每個記錄最多可以應用 100 個標籤
- 標籤支持對標題的全文搜索