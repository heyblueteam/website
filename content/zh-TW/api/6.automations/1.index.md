---
title: 列出所有自動化
description: 獲取具有過濾選項的項目自動化的分頁列表
---

## 列出所有自動化

Blue中的自動化允許您創建強大的工作流程，根據特定事件觸發操作。此端點檢索為您的項目配置的所有自動化，包括它們的觸發器、操作和當前狀態。

### 基本範例

```graphql
query ListAutomations {
  automationList {
    items {
      id
      isActive
      trigger {
        type
        color
      }
      actions {
        type
        color
      }
      createdAt
    }
    pageInfo {
      totalItems
      hasNextPage
    }
  }
}
```

### 進階範例

```graphql
query ListAutomationsAdvanced {
  automationList(
    filter: {
      customFieldIds: ["field_123", "field_456"]
    }
    skip: 0
    take: 50
  ) {
    items {
      id
      isActive
      createdAt
      updatedAt
      
      # Trigger details
      trigger {
        id
        type
        color
        metadata {
          ... on AutomationTriggerMetadataTodoOverdue {
            incompleteOnly
          }
        }
        customField {
          id
          name
          type
        }
        customFieldOptions {
          id
          title
          color
        }
        todoList {
          id
          title
        }
        tags {
          id
          title
          color
        }
        assignees {
          id
          name
          email
        }
      }
      
      # Action details
      actions {
        id
        type
        color
        duedIn
        assigneeTriggerer
        
        # Action-specific fields
        customField {
          id
          name
        }
        customFieldOptions {
          id
          title
        }
        todoList {
          id
          title
        }
        tags {
          id
          title
        }
        assignees {
          id
          name
        }
        
        # Email action metadata
        metadata {
          ... on AutomationActionMetadataSendEmail {
            email {
              subject
              to
              from
              content
            }
          }
          ... on AutomationActionMetadataCreateChecklist {
            checklists {
              title
              checklistItems {
                title
                duedIn
              }
            }
          }
        }
      }
      
      # Creator info
      createdBy {
        id
        name
        email
      }
    }
    
    pageInfo {
      totalItems
      totalPages
      hasNextPage
      hasPreviousPage
    }
    
    totalCount
  }
}
```

## 輸入參數

### AutomationFilterInput

| 參數 | 類型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `customFieldIds` | [String] | 否 | 過濾與特定自定義字段相關的自動化 |  |

### 分頁參數

| 參數 | 類型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `skip` | Int | 否 | 要跳過的項目數量（默認：0） |  |
| `take` | Int | 否 | 要返回的項目數量（默認：20） |  |

## 回應字段

### AutomationPagination

| 字段 | 類型 | 描述 |
|-------|------|-------------|
| `items` | [Automation!]! | 自動化對象列表 |  |
| `pageInfo` | PageInfo! | 分頁信息 |  |
| `totalCount` | Int! | 自動化的總數 |  |

### Automation

| 字段 | 類型 | 描述 |
|-------|------|-------------|
| `id` | ID! | 唯一標識符 |  |
| `trigger` | AutomationTrigger! | 觸發此自動化的事件 |  |
| `actions` | [AutomationAction!]! | 觸發時執行的操作 |  |
| `isActive` | Boolean! | 自動化是否當前啟用 |  |
| `createdBy` | User! | 創建自動化的用戶 |  |
| `project` | Project! | 此自動化所屬的項目 |  |
| `createdAt` | DateTime! | 創建時間戳 |  |
| `updatedAt` | DateTime! | 最後更新時間戳 |  |

### AutomationTrigger

| 字段 | 類型 | 描述 |
|-------|------|-------------|
| `id` | ID! | 唯一標識符 |  |
| `type` | AutomationTriggerType! | 觸發事件的類型 |  |
| `color` | String | 相關顏色（十六進制格式） |  |
| `metadata` | AutomationTriggerMetadata | 觸發器特定的配置 |  |
| `customField` | CustomField | 相關自定義字段（如果適用） |  |
| `customFieldOptions` | [CustomFieldOption!] | 選擇字段的選項 |  |
| `todos` | [CustomFieldReferenceTodo!] | 參考的待辦事項 |  |
| `todoList` | TodoList | 相關的待辦事項列表 |  |
| `tags` | [Tag!] | 相關標籤 |  |
| `assignees` | [User!] | 相關指派人 |  |

### AutomationAction

| 字段 | 類型 | 描述 |
|-------|------|-------------|
| `id` | ID! | 唯一標識符 |  |
| `type` | AutomationActionType! | 要執行的操作類型 |  |
| `color` | String | 相關顏色（十六進制格式） |  |
| `duedIn` | Int | 到期日操作要增加的天數 |  |
| `assigneeTriggerer` | String | 特殊指派人標識符 |  |
| `metadata` | AutomationActionMetadata | 操作特定的配置 |  |
| `customField` | CustomField | 目標自定義字段 |  |
| `customFieldOptions` | [CustomFieldOption!] | 選擇字段的選項 |  |
| `todoList` | TodoList | 目標待辦事項列表 |  |
| `tags` | [Tag!] | 要添加/移除的標籤 |  |
| `assignees` | [User!] | 要添加/移除的指派人 |  |
| `httpOption` | AutomationActionHttpOption | HTTP請求配置 |  |

## 觸發類型

| 類型 | 描述 |
|------|-------------|
| `TODO_CREATED` | 當創建新記錄時 |  |
| `TODO_LIST_CHANGED` | 當記錄在列表之間移動時 |  |
| `TODO_MARKED_AS_COMPLETE` | 當記錄完成時 |  |
| `TODO_MARKED_AS_INCOMPLETE` | 當記錄未完成時 |  |
| `ASSIGNEE_ADDED` | 當添加指派人時 |  |
| `ASSIGNEE_REMOVED` | 當移除指派人時 |  |
| `DUE_DATE_CHANGED` | 當到期日被修改時 |  |
| `DUE_DATE_REMOVED` | 當到期日被清除時 |  |
| `DUE_DATE_EXPIRED` | 當到期日過期時 |  |
| `TAG_ADDED` | 當添加標籤時 |  |
| `TAG_REMOVED` | 當移除標籤時 |  |
| `CHECKLIST_ITEM_MARKED_AS_DONE` | 當檢查清單項目完成時 |  |
| `CHECKLIST_ITEM_MARKED_AS_UNDONE` | 當檢查清單項目未完成時 |  |
| `TODO_COPIED_OR_MOVED_FROM_OTHER_PROJECT` | 當記錄被導入時 |  |
| `CUSTOM_FIELD_ADDED` | 當自定義字段值被設置時 |  |
| `CUSTOM_FIELD_REMOVED` | 當自定義字段值被清除時 |  |
| `CUSTOM_FIELD_BUTTON_CLICKED` | 當按鈕字段被點擊時 |  |
| `COLOR_ADDED` | 當顏色被應用時 |  |
| `COLOR_REMOVED` | 當顏色被移除時 |  |

## 操作類型

| 類型 | 描述 |
|------|-------------|
| `CHANGE_TODO_LIST` | 將記錄移動到不同的列表 |  |
| `MARK_AS_COMPLETE` | 完成記錄 |  |
| `MARK_AS_INCOMPLETE` | 取消完成記錄 |  |
| `ADD_ASSIGNEE` | 添加指派人 |  |
| `REMOVE_ASSIGNEE` | 移除指派人 |  |
| `ADD_ASSIGNEE_TRIGGERER` | 添加觸發自動化的用戶 |  |
| `CHANGE_DUE_DATE` | 設置或更新到期日 |  |
| `REMOVE_DUE_DATE` | 清除到期日 |  |
| `ADD_TAG` | 應用標籤 |  |
| `REMOVE_TAG` | 移除標籤 |  |
| `ADD_COLOR` | 應用顏色 |  |
| `REMOVE_COLOR` | 移除顏色 |  |
| `ADD_CUSTOM_FIELD` | 設置自定義字段值 |  |
| `REMOVE_CUSTOM_FIELD` | 清除自定義字段值 |  |
| `CREATE_CHECKLIST` | 創建新檢查清單 |  |
| `MARK_CHECKLIST_ITEM_AS_DONE` | 完成檢查清單項目 |  |
| `MARK_CHECKLIST_ITEM_AS_UNDONE` | 取消完成檢查清單項目 |  |
| `COPY_TODO` | 複製記錄 |  |
| `SEND_EMAIL` | 發送電子郵件通知 |  |
| `GENERATE_PDF` | 生成PDF文檔 |  |
| `MAKE_HTTP_REQUEST` | 調用外部API |  |

## 所需權限

列出自動化需要身份驗證和項目訪問：

| 角色 | 可以列出自動化 |
|------|---------------------|
| `OWNER` | ✅ 是 |  |
| `ADMIN` | ✅ 是 |  |
| `MEMBER` | ✅ 是 |  |
| `CLIENT` | ✅ 是 |  |

所有經過身份驗證的用戶只要有項目訪問權限即可查看自動化。

## 錯誤響應

### 需要身份驗證
```json
{
  "errors": [{
    "message": "You must be logged in",
    "extensions": {
      "code": "UNAUTHENTICATED"
    }
  }]
}
```

### 找不到項目
```json
{
  "errors": [{
    "message": "Project not found",
    "extensions": {
      "code": "PROJECT_NOT_FOUND"
    }
  }]
}
```

## 重要說明

- **排序**：自動化始終按創建日期返回最新的項目
- **項目範圍**：自動化範圍限於當前項目上下文
- **活動狀態**：檢查 `isActive` 以確定自動化是否當前正在運行
- **元數據**：某些觸發器和操作具有額外的元數據以供配置
- **性能**：對於擁有許多自動化的項目，請使用分頁
- **過濾**：目前僅支持按自定義字段ID進行過濾