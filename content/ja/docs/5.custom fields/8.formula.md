---
title: 数式
description: 
---

数式カスタムフィールドを使用すると、Blue内の既存データに基づいて計算を作成できます。利益率、合計、税率、手数料の計算に最適です。


![Formula 1](/docs/Formula_1.png "Formula 1")

以下の動画で数式カスタムフィールドの概要をご覧いただけます：

<youtube url="https://www.youtube.com/watch?v=RsXnOc2JU9k" />

数式は、同じレコード内の以下のカスタムフィールドのデータを使用できます：

- [通貨](/ja/docs/custom-fields/currency)
- [星評価](/ja/docs/custom-fields/star-rating)
- [数値](/ja/docs/custom-fields/number)
- [パーセント](/ja/docs/custom-fields/percent)

波括弧 `{` を入力するだけで、参照可能なフィールドのドロップダウンリストがシステムによって表示されます。

## 対応する演算

その後、これらの値に対して関数を使用して演算を実行できます：

- **AVERAGE**: 数値セットの平均を計算します。
- **AVERAGEA**: テキストをゼロとして扱って平均を求めます。
- **COUNT**: 数値フィールドのエントリ数をカウントします。
- **COUNTA**: 空でない値の数をカウントします。
- **MAX**: セット内の最大値を見つけます。
- **MIN**: セット内の最小値を特定します。
- **MINUS**: ある値から別の値を減算します。
- **MULTIPLY**: 2つの値を乗算します。
- **SUM**: 一連の数値を合計します

これらの演算は、カスタムフィールド名を関数に渡すことで使用できます。例えば、`Cost`というカスタムフィールドがある場合、`AVERAGE(Cost)`を使用して一連のレコードの平均コストを計算できます。

複数のカスタムフィールドを関数に渡すには、`,`コンマを使用して各フィールドを区切ります。例えば、`Cost`と`Profit`というカスタムフィールドがある場合、`AVERAGE(Cost, Profit)`を使用して一連のレコードの平均コストと利益を計算できます。

以下の数学演算子も使用できます：

| 演算子 | 説明 |
|:--------:|:-----------:|
| **+**    | 加算    |
| **-**    | 減算 |
| **\***    | 乗算 |
| **/**    | 除算    |
| **%**    | パーセンテージ  |
| **^**    | べき乗 |

以下は、販売価格とコストに基づいて利益計算を作成する例です：

![Formula 2](/docs/Formula_2.png "Formula 2")


数式の複雑さや演算数に制限はありません。構文が有効である限り、正しく検証されます。数式は同じレコード内のフィールドのみを参照し、外部データは参照しません。

## 表示の設定
数式カスタムフィールド作成の最終ステップは、データの表示方法を決定することです。

数式フィールドには3つの表示オプションがあります：

1. **数値**: このオプションはシンプルな数値を表示します。表示する小数点以下の桁数も選択でき、データの詳細レベルを制御できます。
2. **通貨**: この オプションは金額形式で値を表示します。予算、収益、コスト、その他の財務データの追跡に最適です。通貨は現地の標準に従ってフォーマットされ、[多数のグローバル通貨をサポート](/ja/docs/custom-fields/currency)しています。
3. **パーセンテージ**: この形式は値をパーセンテージとして表示し、完了率、成長指標、その他の比率を表示するのに便利です。計算された値を自動的にパーセンテージに変換するため、比率を理解しやすくなります。

![Formula 3](/docs/Formula_3.png "Formula 3")


ユーザーは、フィールドにマウスを置くことで、基になる数式ロジックを表示できます。

![Formula 4](/docs/Formula_4.png "Formula 4")

編集可能な数式は、参照される値が変更された場合にリアルタイムで結果を更新しますが、エクスポートされたデータには数式自体ではなく、計算された数式結果のみが含まれます。