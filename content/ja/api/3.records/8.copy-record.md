---
title: レコードのコピー
description: 特定のデータ要素を保持しながら既存のレコードのコピーを作成します。
---

## レコードをコピーする

特定の要素を維持しながら既存のレコードのコピーを作成するには、`copyTodo` ミューテーションを使用します：

```graphql
mutation CopyTodo {
  copyTodo(
    input: {
      title: "new todo"
      todoId: "todo-id"
      todoListId: "todo-list-id"
      options: [
        DESCRIPTION
        DUE_DATE
        CHECKLISTS
        ASSIGNEES
        TAGS
        CUSTOM_FIELDS
        COMMENTS
      ]
    }
  )
}
```

### 必要なヘッダー
```http
x-bloo-token-id: "your-token-id"
x-bloo-token-secret: "your-token-secret" 
x-bloo-project-id: "project-id-or-slug"
x-bloo-company-id: "company-id-or-slug"
```

### 入力パラメータ

| フィールド | タイプ | 必須 | 説明 |
|-------|------|----------|-------------|
| title | String | いいえ | コピーされたレコードの新しいタイトル（オプション） |  |
| todoId | String | はい | コピーするレコードのID |  |
| todoListId | String | はい | コピーを作成するリストのID |  |
| options | Array | はい | 元のレコードからコピーするデータ要素 |  |

### コピーオプション

`options` 配列はこれらの値を受け入れます：

| オプション | 説明 |
|--------|-------------|
| DESCRIPTION | レコードの説明をコピーします |  |
| DUE_DATE | 期限日とタイムゾーンをコピーします |  |
| CHECKLISTS | すべてのチェックリストとそのアイテムをコピーします |  |
| ASSIGNEES | すべての割り当てられたユーザーをコピーします（ターゲットプロジェクトのメンバーシップでフィルタリング） |  |
| TAGS | すべての関連タグをコピーします |  |
| CUSTOM_FIELDS | すべてのカスタムフィールドの値をコピーします（ファイル添付を含む） |  |
| COMMENTS | すべてのコメントと返信をコピーします |  |

### 例の応答
```json
{
  "data": {
    "copyTodo": true
  }
}
```

::callout

---
icon: lightbulb
---
**コピーの配置** <br/>
コピーされたレコードはデフォルトでターゲットリストの下部に配置されます。配置を制御するには、[レコード移動ミューテーション](/api/records/move-record-list)を使用してください。
:: 

::callout
---
icon: i-heroicons-exclamation-triangle
---
**必要な権限** <br/>
ソースプロジェクトとターゲットプロジェクトの両方で**編集**権限（オーナー、管理者、またはメンバーの役割）が必要です。**注意**: メンバー役割のユーザーは、同じプロジェクト内でのみレコードをコピーできます。プロジェクト間のコピーには管理者またはオーナーの権限が必要です。コピーに失敗した場合は、`FORBIDDEN` エラーコードが返されます。
::

### エラーハンドリング
この操作の一般的なエラーコード：
- `TODO_NOT_FOUND`: 無効またはアクセスできない todoId
- `TODO_LIST_NOT_FOUND`: 無効またはアクセスできない todoListId
- `FORBIDDEN`: 権限不足またはプロジェクト間の制限

完全な参照については、[エラーコード](/api/error-codes)を参照してください。

## 高度な機能

### プロジェクト間コピー
このミューテーションは、次の考慮事項を持って異なるプロジェクト間でレコードをコピーすることをサポートします：
- **オーナー/管理者**: アクセスできる任意のプロジェクト間でレコードをコピーできます
- **メンバー**: 同じプロジェクト内でのコピーに制限されます
- **割り当てフィルタリング**: プロジェクト間でコピーする際、割り当てられたユーザーはターゲットプロジェクトにアクセスできるユーザーのみを含むように自動的にフィルタリングされます

### カスタムフィールドの取り扱い
`CUSTOM_FIELDS` オプションを使用する場合：
- すべてのカスタムフィールドの値が新しいレコードにコピーされます
- カスタムフィールド内のファイル添付は、新しいストレージ参照で適切に複製されます
- カスタムフィールドのタイプは保持され、ターゲットプロジェクトの構成に対して検証されます

### 自動化統合
プロジェクト間のコピーは、ソースプロジェクトとターゲットプロジェクトの両方で追加の自動化ルールをトリガーする可能性があり、プロジェクトの境界を越えた高度なワークフロー管理を可能にします。