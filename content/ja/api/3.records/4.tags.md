---
title: タグ
description: Blue APIを使用してレコードを分類するためのタグを作成、管理、使用します。
---

## 概要

タグは、Blueでレコードを分類し整理するための強力な方法です。タグシステムは、タグの作成、管理、フィルタリングのための包括的な機能を提供し、一括操作や高度なフィルタリングをサポートします。

## タグの一覧

プロジェクトから柔軟なフィルタリングとソートオプションを使用してタグを取得します。

### 基本的な例

```graphql
query ListTags {
  tagList(
    filter: { 
      projectIds: ["project-123"] 
      excludeArchivedProjects: false 
    }
    first: 50
    orderBy: title_ASC
  ) {
    items {
      id
      uid
      title
      color
      project {
        id
        name
      }
      createdAt
      updatedAt
    }
    pageInfo {
      totalPages
      totalItems
      page
      perPage
      hasNextPage
      hasPreviousPage
    }
    totalCount
  }
}
```

### 高度なフィルタリングの例

```graphql
query FilterTags {
  tagList(
    filter: {
      projectIds: ["project-123", "project-456"]
      search: "urgent"
      colors: ["#ff0000", "#ffaa00"]
      excludeArchivedProjects: true
    }
    orderBy: createdAt_DESC
    first: 20
  ) {
    items {
      id
      title
      color
      todos {
        id
        title
      }
    }
    totalCount
  }
}
```

## タグの作成

プロジェクト内で新しいタグを作成します。

```graphql
mutation CreateTag {
  createTag(
    input: {
      title: "High Priority"
      color: "#ff0000"
    }
  ) {
    id
    uid
    title
    color
    project {
      id
      name
    }
    createdAt
  }
}
```

## タグの更新

既存のタグプロパティを変更します。

```graphql
mutation UpdateTag {
  editTag(
    input: {
      id: "tag-123"
      title: "Critical Priority"
      color: "#cc0000"
    }
  ) {
    id
    title
    color
    updatedAt
  }
}
```

## タグの削除

システムからタグを削除します。これにより、関連するすべてのレコードからもタグが削除されます。

```graphql
mutation DeleteTag {
  deleteTag(id: "tag-123")
}
```

## レコードにタグを付ける

既存のタグを使用してレコード（todo）にタグを関連付けるか、新しいタグを作成します。

### 既存のタグを使用する

```graphql
mutation TagRecord {
  setTodoTags(
    input: {
      todoId: "todo-123"
      tagIds: ["tag-456", "tag-789"]
    }
  )
}
```

### タグ付け中にタグを作成する

タグタイトルを提供することで、新しいタグをその場で作成できます：

```graphql
mutation TagRecordWithNewTags {
  setTodoTags(
    input: {
      todoId: "todo-123"
      tagIds: ["existing-tag-id"]
      tagTitles: ["New Tag", "Another New Tag"]
    }
  )
}
```

## AIタグ提案

レコードに対するAIによるタグ提案を取得します：

```graphql
mutation GetTagSuggestions {
  aiTag(
    input: {
      todoId: "todo-123"
      suggestionsCount: 5
    }
  ) {
    suggestions {
      title
      confidence
      color
    }
  }
}
```

## 入力パラメータ

### TagListFilter

| パラメータ | 型 | 必須 | 説明 |
|-----------|------|----------|-------------|
| `projectIds` | [String!] | いいえ | プロジェクトIDまたはスラグでタグをフィルタリング |  |
| `excludeArchivedProjects` | Boolean | いいえ | アーカイブされたプロジェクトからタグを除外 |  |
| `search` | String | いいえ | タグタイトルを検索（大文字と小文字を区別しない） |  |
| `titles` | [String!] | いいえ | 特定のタグタイトルでフィルタリング |  |
| `colors` | [String!] | いいえ | 特定の色でフィルタリング（16進形式） |  |
| `tagIds` | [String!] | いいえ | 特定のタグIDでフィルタリング |  |

### CreateTagInput

| パラメータ | 型 | 必須 | 説明 |
|-----------|------|----------|-------------|
| `title` | String | いいえ | タグタイトル（指定しない場合は自動生成） |  |
| `color` | String! | ✅ はい | 16進形式のタグ色（例: "#ff0000"） |  |

### EditTagInput

| パラメータ | 型 | 必須 | 説明 |
|-----------|------|----------|-------------|
| `id` | String! | ✅ はい | 更新するタグのID |  |
| `title` | String | いいえ | 新しいタグタイトル |  |
| `color` | String | いいえ | 新しいタグ色（16進形式） |  |

### SetTodoTagsInput

| パラメータ | 型 | 必須 | 説明 |
|-----------|------|----------|-------------|
| `todoId` | String! | ✅ はい | タグを付けるレコードのID |  |
| `tagIds` | [String!] | いいえ | 適用する既存のタグのID |  |
| `tagTitles` | [String!] | いいえ | 作成して適用する新しいタグのタイトル |  |

### TagOrderByInput 値

| 値 | 説明 |
|-------|-------------|
| `id_ASC` / `id_DESC` | タグIDでソート |
| `uid_ASC` / `uid_DESC` | ユニーク識別子でソート |
| `title_ASC` / `title_DESC` | タイトルでアルファベット順にソート |
| `color_ASC` / `color_DESC` | 色値でソート |
| `createdAt_ASC` / `createdAt_DESC` | 作成日でソート |
| `updatedAt_ASC` / `updatedAt_DESC` | 最終更新日でソート |

## レスポンスフィールド

### タグタイプ

| フィールド | 型 | 説明 |
|-------|------|-------------|
| `id` | ID! | タグのユニーク識別子 |  |
| `uid` | String! | ユーザーフレンドリーなユニーク識別子 |  |
| `title` | String! | タグのタイトル/名前 |  |
| `color` | String! | タグの色（16進形式） |  |
| `project` | Project! | このタグが属するプロジェクト |  |
| `todos` | [Todo!]! | このタグに関連付けられたレコード |  |
| `createdAt` | DateTime! | タグが作成された日時 |  |
| `updatedAt` | DateTime! | タグが最後に更新された日時 |  |

### TagPagination レスポンス

| フィールド | 型 | 説明 |
|-------|------|-------------|
| `items` | [Tag!]! | タグレコードの配列 |  |
| `pageInfo` | PageInfo! | ページネーション情報 |  |
| `totalCount` | Int! | フィルタに一致するタグの総数 |  |

### PageInfo フィールド

| フィールド | 型 | 説明 |
|-------|------|-------------|
| `totalPages` | Int | 総ページ数 |  |
| `totalItems` | Int | すべてのページのアイテムの総数 |  |
| `page` | Int | 現在のページ番号 |  |
| `perPage` | Int | ページごとのアイテム数 |  |
| `hasNextPage` | Boolean! | 次のページがあるかどうか |  |
| `hasPreviousPage` | Boolean! | 前のページがあるかどうか |  |

## 必要な権限

### タグ管理

| アクション | 必要な役割 |
|--------|--------------|
| Create tags | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |
| Edit tags | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |
| Delete tags | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |
| Apply tags to records | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |

### タグの可視性

タグは、タグが作成されたプロジェクトにアクセスできるすべてのユーザーに表示されます。特定の操作に対しては役割ベースのフィルタリングが適用される場合があります。

## エラー応答

### タグが見つかりません
```json
{
  "errors": [{
    "message": "Tag not found",
    "extensions": {
      "code": "NOT_FOUND"
    }
  }]
}
```

### 無効な色形式
```json
{
  "errors": [{
    "message": "Color must be in hex format (e.g., #ff0000)",
    "extensions": {
      "code": "BAD_USER_INPUT"
    }
  }]
}
```

### 権限が拒否されました
```json
{
  "errors": [{
    "message": "You do not have permission to modify tags in this project",
    "extensions": {
      "code": "FORBIDDEN"
    }
  }]
}
```

### レコードが見つかりません
```json
{
  "errors": [{
    "message": "Todo not found",
    "extensions": {
      "code": "NOT_FOUND"
    }
  }]
}
```

## ベストプラクティス

1. **一貫した色を使用する**: チームのためのカラーページングシステムを確立する
2. **説明的なタイトル**: チームメンバーが理解できる明確で説明的なタグ名を使用する
3. **バッチ操作**: `setTodoTags`を使用して一度に複数のタグを適用する
4. **検索とフィルタリング**: 新しいタグを作成する前に既存のタグを見つけるために検索機能を使用する
5. **タグ管理**: 使用されていないタグを定期的にレビューし、整理する
6. **色の規則**: 一般的なタグタイプのために標準の色を使用することを検討する（緊急の場合は赤、完了の場合は緑など）

## 高度な機能

### タグ作成のデフォルト

- `setTodoTags`を介して作成された新しいタグは、`tagTitles`の色にデフォルト設定されます
- 指定された色がないタグは`#00a0d2`にフォールバックします
- タグタイトルは自動的に空白がトリムされます

### 自動化統合

タグは以下のように使用できます：
- 自動化ルールによって自動的に適用される
- 自動化ワークフローのトリガーとして使用される
- 自動化アクションを通じて変更される

### リアルタイム更新

タグの変更はGraphQLサブスクリプションを介してブロードキャストされ、接続されたクライアントでリアルタイムの更新が可能です。

## 重要な注意事項

- タグを削除すると、関連するすべてのレコードから削除されます
- タグはプロジェクトスコープであり、プロジェクト間で共有することはできません
- 色値は有効な16進コードでなければなりません（例: "#ff0000", "#00aa00"）
- タグタイトルは大文字と小文字を区別します
- 単一のレコードに最大100タグを適用できます
- タグはタイトル全体にわたるフルテキスト検索をサポートします