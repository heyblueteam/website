---
title: ユーザー管理API
description: Blueプロジェクトおよび企業におけるユーザー、招待、役割、権限を管理するための完全なAPIリファレンス
---

## 概要

ユーザー管理APIは、チームメンバーの管理、アクセス権限の制御、Blueプロジェクトおよび企業全体の労働力の整理のための包括的なツールを提供します。新しいチームメンバーを追加する場合でも、既存のユーザーを管理する場合でも、カスタム権限構造を定義する場合でも、これらのAPIはユーザーライフサイクル管理のすべての側面を処理します。

Blueでのユーザー管理は2つのレベルで行われます：
- **プロジェクトレベル**: 特定のプロジェクト内でユーザーを管理し、プロジェクト固有の権限を設定
- **企業レベル**: 組織全体でユーザーを管理し、企業全体のアクセスを提供

## 利用可能な操作

### コアユーザー管理

| 操作 | 説明 | リンク |
|-----------|-------------|------|
| **Invite User** | 特定のアクセスレベルを持つ新しいユーザーに招待を送信 | [View Details →](/api/user-management/invite-user) |
| **List Users** | プロジェクトまたは企業内のユーザーをクエリおよびフィルタリング | [View Details →](/api/user-management/list-users) |
| **Remove User** | プロジェクトまたは企業からユーザーを削除 | [View Details →](/api/user-management/remove-user) |

### 役割と権限管理

| 操作 | 説明 | リンク |
|-----------|-------------|------|
| **Custom Roles** | 詳細な権限を持つカスタム役割を作成および管理 | [View Details →](/api/user-management/retrieve-custom-role) |

## アクセスレベル

Blueは、事前定義されたアクセスレベルを持つ階層的な権限システムを提供します：

### 標準アクセスレベル

| レベル | 説明 | 機能 |
|-------|-------------|--------------|
| **OWNER** | プロジェクト/企業に対する完全な制御 | All permissions, can transfer ownership |
| **ADMIN** | 管理者アクセス | User management, settings, billing |
| **MEMBER** | 標準チームメンバー | Full project functionality, limited admin access |
| **CLIENT** | 外部クライアントアクセス | Limited project visibility, focused on deliverables |
| **COMMENT_ONLY** | コメントのみのアクセス | 表示およびコメント可能、編集不可 |
| **VIEW_ONLY** | 読み取り専用アクセス | Can view content only |

### 権限階層

ユーザーは、自分のレベルまたはそれ以下のユーザーを招待または管理できます：
- **オーナー**はすべてのアクセスレベルを管理できます
- **管理者**はADMIN、MEMBER、CLIENT、COMMENT_ONLY、VIEW_ONLYを管理できます
- **メンバー**はMEMBER、CLIENT、COMMENT_ONLY、VIEW_ONLYを管理できます
- **クライアント**は他のCLIENTSのみを管理できます

## 主要概念

### ユーザー招待
- **メールベース**: ユーザーはメールアドレスを通じて招待されます
- **役割の割り当て**: 招待時にアクセスレベルとオプションのカスタム役割を設定
- **マルチプロジェクト**: 単一の招待が複数のプロジェクトへのアクセスを付与できます
- **有効期限**: 招待は7日後に期限切れになります
- **自動通知**: Blueは自動的にメール招待を送信します

### プロジェクト対企業アクセス
- **プロジェクト招待**: 特定のプロジェクトへのアクセスを付与します
- **企業招待**: 企業レベルのアクセスを付与し、特定のプロジェクトを含めることもできます
- **企業オーナー**: すべての企業プロジェクトに自動的にADMINアクセスを取得します
- **スコープ制限**: プロジェクトと企業の招待パラメータを組み合わせることはできません

### カスタム役割
- **詳細な権限**: 標準アクセスレベルを超える特定の機能を定義します
- **プロジェクト固有**: カスタム役割は個々のプロジェクトにスコープされます
- **フィールドレベルの制御**: 特定のカスタムフィールドへのアクセスを制御します
- **アクション制限**: 特定のアクション（作成、編集、削除など）を制限します

## 一般的なパターン

### 新しいチームメンバーを招待する
```graphql
mutation InviteTeamMember {
  inviteUser(input: {
    email: "john.doe@company.com"
    projectId: "web-redesign"
    accessLevel: MEMBER
  })
}
```

### 企業全体の招待を作成する
```graphql
mutation InviteToCompany {
  inviteUser(input: {
    email: "manager@company.com"
    companyId: "company_123"
    projectIds: ["project_1", "project_2", "project_3"]
    accessLevel: ADMIN
  })
}
```

### プロジェクトユーザーを一覧表示する
```graphql
query ProjectUsers {
  projectUsers(projectId: "web-redesign") {
    id
    user {
      name
      email
      avatar
    }
    accessLevel
    role {
      name
      permissions
    }
    invitedAt
    joinedAt
  }
}
```

### ユーザーを削除する
```graphql
mutation RemoveProjectUser {
  removeUser(input: {
    userId: "user_456"
    projectId: "web-redesign"
  })
}
```

### カスタム役割を作成する
```graphql
mutation CreateCustomRole {
  createProjectUserRole(input: {
    projectId: "web-redesign"
    name: "Content Reviewer"
    permissions: {
      canCreateRecords: false
      canEditOwnRecords: true
      canEditAllRecords: false
      canDeleteRecords: false
      canManageUsers: false
      canViewReports: true
    }
  }) {
    id
    name
    permissions
  }
}
```

## 権限管理

### 標準権限マトリックス

| アクション | オーナー | 管理者 | メンバー | クライアント | コメントのみ | 読み取り専用 |
|--------|-------|-------|--------|--------|-------------|-----------|
| **Invite Users** | ✅ すべてのレベル | ✅ ADMIN以下 | ✅ MEMBER以下 | ✅ CLIENTのみ | ❌ なし | ❌ なし |
| **Remove Users** | ✅ すべてのユーザー | ✅ ADMIN以下 | ✅ MEMBER以下 | ✅ CLIENTのみ | ❌ なし | ❌ なし |
| **Modify Project Settings** | ✅ はい | ✅ はい | ❌ いいえ | ❌ いいえ | ❌ いいえ | ❌ いいえ |
| **Create Records** | ✅ はい | ✅ はい | ✅ はい | ✅ 限定的 | ❌ いいえ | ❌ いいえ |
| **Edit All Records** | ✅ はい | ✅ はい | ✅ はい | ❌ いいえ | ❌ いいえ | ❌ いいえ |
| **Delete Records** | ✅ はい | ✅ はい | ✅ はい | ❌ いいえ | ❌ いいえ | ❌ いいえ |
| **View Reports** | ✅ はい | ✅ はい | ✅ はい | ✅ 限定的 | ❌ いいえ | ❌ いいえ |

### カスタム役割の機能
- **フィールドレベルの権限**: 特定のカスタムフィールドへのアクセスを制御します
- **アクション特定のルール**: 特定の操作（作成、編集、削除）を許可/拒否します
- **表示制限**: ユーザーが見ることができるレコードを制限します
- **機能トグル**: 役割ごとに特定の機能を有効/無効にします

## ベストプラクティス

### ユーザーオンボーディング
1. **標準役割から始める** - ほとんどのユーザーには事前定義されたアクセスレベルを使用
2. **段階的権限** - 限定的なアクセスから始め、必要に応じて拡大
3. **明確なコミュニケーション** - 招待を送信する際にコンテキストを含める
4. **定期的なレビュー** - ユーザーアクセスを定期的に監査

### セキュリティ考慮事項
1. **最小権限の原則** - 最小限の必要な権限を付与
2. **定期的なアクセス監査** - ユーザー権限を四半期ごとにレビュー
3. **オフボーディングプロセス** - ユーザーが退職した際に即座にアクセスを削除
4. **カスタム役割の文書化** - カスタム役割の目的と制限を文書化

### チームの組織
1. **一貫した命名** - 明確で説明的な役割名を使用
2. **役割の統合** - あまりにも多くの類似したカスタム役割を作成しない
3. **企業構造** - 権限を組織の階層に合わせる
4. **プロジェクトの継承** - 企業役割がプロジェクトアクセスにどのように影響するかを考慮

## エラーハンドリング

ユーザー管理時の一般的なエラー：

| エラーコード | 説明 | 解決策 |
|------------|-------------|----------|
| `USER_ALREADY_IN_THE_PROJECT` | ユーザーはすでにプロジェクトアクセスを持っています | Check current user list before inviting |
| `UNAUTHORIZED` | アクションを実行するための権限が不十分 | Verify your access level and permissions |
| `PROJECT_NOT_FOUND` | プロジェクトが存在しないか、アクセスがありません | Confirm project ID and access rights |
| `INVITATION_LIMIT` | 請求ティアの招待制限に達しました | Upgrade plan or remove inactive users |
| `ADD_SELF` | 自分自身を招待することはできません | 別のメールを使用するか、別の管理者に招待してもらってください |
| `COMPANY_BANNED` | 企業アカウントが一時停止されています | Contact support to resolve account status |

## レート制限

ユーザー管理操作には以下のレート制限があります：
- **招待**: 企業ごとに1時間あたり100件
- **ユーザークエリ**: ユーザーごとに1時間あたり1000件
- **役割の変更**: プロジェクトごとに1時間あたり50件

## 関連リソース

- [プロジェクトAPI](/api/projects) - ユーザーを含むプロジェクトの管理
- [レコードAPI](/api/records) - ユーザー権限がレコードアクセスにどのように影響するかを理解
- [自動化API](/api/automations) - ユーザー管理ワークフローの自動化
- [カスタムフィールドAPI](/api/custom-fields) - カスタム役割のフィールドレベルの権限を管理