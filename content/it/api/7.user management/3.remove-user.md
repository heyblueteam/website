---
title: Rimuovi Utenti
description: Rimuovi utenti da progetti o aziende utilizzando l'API di Blue.
---

## Rimuovi Utenti

Questa pagina tratta di come rimuovere utenti da progetti e aziende. La rimozione dell'utente è un'azione permanente che disassocia l'utente da tutti i record e rimuove il loro accesso, anche se i loro dati storici sono conservati per scopi di audit.

## Rimuovi Utente da Progetto

Rimuovi un utente da un progetto specifico mantenendo il loro accesso all'azienda.

### Esempio di Base

```graphql
mutation {
  removeProjectUser(
    input: {
      projectId: "project-id"
      userId: "user-id"
    }
  ) {
    success
    operationId
  }
}
```

### Esempio di Risposta

```json
{
  "data": {
    "removeProjectUser": {
      "success": true,
      "operationId": null
    }
  }
}
```

**Nota:** Il campo `operationId` non è attualmente popolato da questa mutazione e restituirà `null`.

## Rimuovi Utente da Azienda

Rimuovi un utente dall'intera azienda, il che si riflette su tutti i progetti.

### Esempio di Base

```graphql
mutation {
  removeCompanyUser(
    input: {
      companyId: "company-id"
      userId: "user-id"
    }
  )
}
```

### Esempio di Risposta

```json
{
  "data": {
    "removeCompanyUser": true
  }
}
```

## Parametri di Input

### RemoveProjectUserInput

| Parametro | Tipo | Richiesto | Descrizione |
|-----------|------|----------|-------------|
| `projectId` | String! | ✅ Sì | L'ID del progetto (non slug) |  |
| `userId` | String! | ✅ Sì | L'ID dell'utente da rimuovere |  |

### RemoveCompanyUserInput

| Parametro | Tipo | Richiesto | Descrizione |
|-----------|------|----------|-------------|
| `companyId` | String! | ✅ Sì | L'ID o slug dell'azienda |  |
| `userId` | String! | ✅ Sì | L'ID dell'utente da rimuovere |  |

## Campi di Risposta

### Risposta RemoveProjectUser

| Campo | Tipo | Descrizione |
|-------|------|-------------|
| `success` | Boolean! | Se l'operazione è stata completata con successo |  |
| `operationId` | String | Identificatore unico per l'operazione (attualmente restituisce `null`) |  |

### Risposta RemoveCompanyUser

La mutazione `removeCompanyUser` restituisce un semplice valore `Boolean`:
- `true` - L'utente è stato rimosso con successo

## Permessi Richiesti

### Rimozione Utente Progetto

| Ruolo | Può Rimuovere Utenti |
|------|---------------------|
| `OWNER` | ✅ Sì |  |
| `ADMIN` | ✅ Sì |  |
| `MEMBER` | ❌ No |  |
| `READ_ONLY` | ❌ No |  |

**Note Importanti:**
- Non puoi rimuovere utenti con ruolo `OWNER` da un progetto
- Il sistema impedisce la rimozione dei proprietari di progetto per mantenere l'integrità della proprietà del progetto

### Rimozione Utente Azienda

| Ruolo | Può Rimuovere Utenti |
|------|---------------------|
| `OWNER` | ✅ Sì |  |
| `ADMIN` | ❌ No |  |
| `MEMBER` | ❌ No |  |
| `READ_ONLY` | ❌ No |  |

**Nota:** Solo i proprietari dell'azienda possono rimuovere utenti dall'azienda. Il risolutore applica un accesso rigoroso solo per i PROPRIETARI per le operazioni di rimozione degli utenti aziendali.

## Effetti Collaterali

### Rimozione Progetto
- Rimuove tutti i compiti assegnati per l'utente in quel progetto
- Elimina le cartelle del progetto dell'utente
- Rimuove la relazione utente-progetto
- Invia aggiornamenti in tempo reale per notificare altri utenti
- Crea una voce nel registro di audit

### Rimozione Azienda
- **Eliminazione a cascata su tutti i progetti:**
  - Rimuove tutti i compiti assegnati in tutti i progetti aziendali
  - Rimuove tutte le cartelle utente del progetto
  - Rimuove l'utente da tutti i progetti aziendali
- Rimuove le cartelle utente aziendali
- Rimuove l'utente dall'azienda
- Invia un'email di notifica di rimozione all'utente rimosso
- **Aggiorna la fatturazione (se il prezzo è per utente):**
  - Ricalcola il numero di utenti attivi
  - Aggiorna la quantità dell'abbonamento Stripe
- Crea una voce nel registro di audit

## Risposte di Errore

### Progetto Non Trovato
```json
{
  "errors": [{
    "message": "Project was not found.",
    "extensions": {
      "code": "PROJECT_NOT_FOUND"
    }
  }]
}
```

### Utente Non Trovato
```json
{
  "errors": [{
    "message": "User was not found.",
    "extensions": {
      "code": "USER_NOT_FOUND"
    }
  }]
}
```

### Errore Non Autorizzato
```json
{
  "errors": [{
    "message": "You are not authorized.",
    "extensions": {
      "code": "FORBIDDEN"
    }
  }]
}
```

### Azienda Non Trovata (removeCompanyUser solo)
```json
{
  "errors": [{
    "message": "Company was not found.",
    "extensions": {
      "code": "COMPANY_NOT_FOUND"
    }
  }]
}
```

Questo errore si verifica quando:
- Non hai il ruolo richiesto (PROPRIETARIO/AMMINISTRATORE per i progetti, PROPRIETARIO per l'azienda)
- Tentativi di rimuovere un PROPRIETARIO di progetto
- L'utente non fa parte del progetto/azienda

## Considerazioni Importanti

- **Preservazione dei Dati**: La rimozione dell'utente non è reversibile. Anche se l'utente perde l'accesso, i loro dati storici (commenti, registri delle attività, ecc.) sono conservati per scopi di audit.
- **Protezione del Proprietario**: I proprietari di progetto non possono essere rimossi dai progetti. Trasferisci prima la proprietà se necessario.
- **Impatto sulla Fatturazione**: La rimozione dell'utente aziendale aggiorna automaticamente il tuo abbonamento se sei su un prezzo per utente.
- **Notifica via Email**: La rimozione dall'azienda invia un'email di notifica all'utente rimosso.
- **Effetto a Cascata**: La rimozione dall'azienda influisce su tutti i progetti, mentre la rimozione dal progetto è isolata a quel progetto specifico.

## Operazioni Correlate

- [Elenca Utenti](/api/user-management/list-users) - Visualizza gli utenti prima della rimozione
- [Recupera Ruolo Personalizzato](/api/user-management/retrieve-custom-role) - Controlla i permessi dell'utente
- [Crea Progetto](/api/projects/create-project) - Aggiungi utenti a nuovi progetti