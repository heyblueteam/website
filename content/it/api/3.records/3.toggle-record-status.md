---
title: Attiva/Disattiva Stato Record
description: Attiva o disattiva un record tra stato completo e incompleto con una singola mutazione.
---

## Attiva/Disattiva Stato Record

La mutazione `updateTodoDoneStatus` fornisce un modo semplice per attivare o disattivare lo stato di completamento di un record. Se il record è incompleto, lo segna come completo. Se è completo, lo segna come incompleto.

### Esempio

```graphql
mutation ToggleRecordStatus {
  updateTodoDoneStatus(todoId: "todo_123") {
    id
    title
    done
    updatedAt
  }
}
```

## Parametri di Input

| Parametro | Tipo | Richiesto | Descrizione |
|-----------|------|----------|-------------|
| `todoId` | String! | ✅ Sì | L'ID del record da attivare/disattivare |

## Risposta

Restituisce l'oggetto `Todo` aggiornato con tutti i campi disponibili. I campi comunemente utilizzati includono:

- `id` - Identificatore del record
- `title` - Titolo del record
- `done` - Nuovo stato di completamento (true/false)
- `updatedAt` - Timestamp dell'aggiornamento
- Tutti gli altri [campi Todo](/api/records/list-records#todo-fields) sono disponibili

## Permessi Richiesti

| Livello di Accesso | Può Attivare/Disattivare Stato |
|--------------------|-------------------------------|
| `OWNER` | ✅ Sì |
| `ADMIN` | ✅ Sì |
| `MEMBER` | ✅ Sì |
| `CLIENT` | ✅ Sì |
| `COMMENT_ONLY` | ❌ No |
| `VIEW_ONLY` | ❌ No |

**Nota**: I ruoli personalizzati con `allowMarkRecordsAsDone: false` saranno bloccati dall'utilizzo di questa mutazione.

## Risposte di Errore

### TodoNotFoundError
```json
{
  "errors": [{
    "message": "Todo was not found.",
    "extensions": {
      "code": "TODO_NOT_FOUND"
    }
  }]
}
```

### UnauthorizedError
```json
{
  "errors": [{
    "message": "You are not authorized.",
    "extensions": {
      "code": "UNAUTHORIZED"
    }
  }]
}
```

## Note Importanti

### Effetti Collaterali
Attivare o disattivare lo stato di un record attiva diverse azioni automatizzate:

- **Registro Attività**: Crea voci per MARK_AS_COMPLETE o MARK_AS_INCOMPLETE
- **Webhook**: Invia notifiche agli endpoint webhook configurati con stati prima/dopo
- **Automazioni**: Attiva le regole di automazione TODO_MARKED_AS_COMPLETE o TODO_MARKED_AS_INCOMPLETE
- **Notifiche in Tempo Reale**: Invia aggiornamenti agli utenti pertinenti (se configurato)
- **Pubblicazione in Tempo Reale**: Pubblica aggiornamenti todo ai client connessi
- **Monitoraggio del Tempo**: Aggiorna automaticamente i campi personalizzati della durata
- **Indice di Ricerca**: Aggiorna l'indice di ricerca per migliorare la scoperta
- **Analisi**: Aggiorna grafici e report
- **Feed Attività**: I record completati appaiono nel feed di attività dell'azienda

### Suggerimenti per l'Uso
- La mutazione è idempotente - chiamarla due volte restituisce il record al suo stato originale
- L'operazione è atomica - o riesce completamente o fallisce senza modifiche
- I ruoli personalizzati possono limitare questa azione tramite il permesso `allowMarkRecordsAsDone`

### Endpoint Correlati
- **Elenca Record**: Usa `todoQueries.todos` per interrogare e filtrare i record
- **Aggiornamento di Massa**: Usa `updateTodos` per modificare più record contemporaneamente