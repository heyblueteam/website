---
title: 标签
description: 使用 Blue API 创建、管理和使用标签来对记录进行分类。
---

## 概述

标签是对 Blue 中的记录进行分类和组织的强大方式。标签系统提供了全面的功能，用于创建、管理和过滤标签，支持批量操作和高级过滤。

## 列出标签

从项目中检索标签，具有灵活的过滤和排序选项。

### 基本示例

```graphql
query ListTags {
  tagList(
    filter: { 
      projectIds: ["project-123"] 
      excludeArchivedProjects: false 
    }
    first: 50
    orderBy: title_ASC
  ) {
    items {
      id
      uid
      title
      color
      project {
        id
        name
      }
      createdAt
      updatedAt
    }
    pageInfo {
      totalPages
      totalItems
      page
      perPage
      hasNextPage
      hasPreviousPage
    }
    totalCount
  }
}
```

### 高级过滤示例

```graphql
query FilterTags {
  tagList(
    filter: {
      projectIds: ["project-123", "project-456"]
      search: "urgent"
      colors: ["#ff0000", "#ffaa00"]
      excludeArchivedProjects: true
    }
    orderBy: createdAt_DESC
    first: 20
  ) {
    items {
      id
      title
      color
      todos {
        id
        title
      }
    }
    totalCount
  }
}
```

## 创建标签

在项目中创建新标签。

```graphql
mutation CreateTag {
  createTag(
    input: {
      title: "High Priority"
      color: "#ff0000"
    }
  ) {
    id
    uid
    title
    color
    project {
      id
      name
    }
    createdAt
  }
}
```

## 更新标签

修改现有标签属性。

```graphql
mutation UpdateTag {
  editTag(
    input: {
      id: "tag-123"
      title: "Critical Priority"
      color: "#cc0000"
    }
  ) {
    id
    title
    color
    updatedAt
  }
}
```

## 删除标签

从系统中移除标签。这也将从所有关联记录中移除该标签。

```graphql
mutation DeleteTag {
  deleteTag(id: "tag-123")
}
```

## 标签记录

使用现有标签将标签与记录（待办事项）关联，或创建新标签。

### 使用现有标签

```graphql
mutation TagRecord {
  setTodoTags(
    input: {
      todoId: "todo-123"
      tagIds: ["tag-456", "tag-789"]
    }
  )
}
```

### 在标记时创建标签

您可以通过提供标签标题即时创建新标签：

```graphql
mutation TagRecordWithNewTags {
  setTodoTags(
    input: {
      todoId: "todo-123"
      tagIds: ["existing-tag-id"]
      tagTitles: ["New Tag", "Another New Tag"]
    }
  )
}
```

## AI 标签建议

获取记录的 AI 驱动标签建议：

```graphql
mutation GetTagSuggestions {
  aiTag(
    input: {
      todoId: "todo-123"
      suggestionsCount: 5
    }
  ) {
    suggestions {
      title
      confidence
      color
    }
  }
}
```

## 输入参数

### TagListFilter

| 参数 | 类型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `projectIds` | [String!] | 否 | 按项目 ID 或别名过滤标签 |  |
| `excludeArchivedProjects` | Boolean | 否 | 排除归档项目中的标签 |  |
| `search` | String | 否 | 搜索标签标题（不区分大小写） |  |
| `titles` | [String!] | 否 | 按特定标签标题过滤 |  |
| `colors` | [String!] | 否 | 按特定颜色过滤（十六进制格式） |  |
| `tagIds` | [String!] | 否 | 按特定标签 ID 过滤 |  |

### CreateTagInput

| 参数 | 类型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `title` | String | 否 | 标签标题（如果未提供，则自动生成） |  |
| `color` | String! | ✅ 是 | 标签颜色，十六进制格式（例如，“#ff0000”） |  |

### EditTagInput

| 参数 | 类型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `id` | String! | ✅ 是 | 要更新的标签 ID |  |
| `title` | String | 否 | 新标签标题 |  |
| `color` | String | 否 | 新标签颜色，十六进制格式 |  |

### SetTodoTagsInput

| 参数 | 类型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `todoId` | String! | ✅ 是 | 要标记的记录 ID |  |
| `tagIds` | [String!] | 否 | 要应用的现有标签 ID |  |
| `tagTitles` | [String!] | 否 | 要创建和应用的新标签标题 |  |

### TagOrderByInput 值

| 值 | 描述 |
|-------|-------------|
| `id_ASC` / `id_DESC` | 按标签 ID 排序 |  |
| `uid_ASC` / `uid_DESC` | 按唯一标识符排序 |  |
| `title_ASC` / `title_DESC` | 按标题字母顺序排序 |  |
| `color_ASC` / `color_DESC` | 按颜色值排序 |  |
| `createdAt_ASC` / `createdAt_DESC` | 按创建日期排序 |  |
| `updatedAt_ASC` / `updatedAt_DESC` | 按最后更新日期排序 |  |

## 响应字段

### 标签类型

| 字段 | 类型 | 描述 |
|-------|------|-------------|
| `id` | ID! | 标签的唯一标识符 |  |
| `uid` | String! | 用户友好的唯一标识符 |  |
| `title` | String! | 标签标题/名称 |  |
| `color` | String! | 标签颜色，十六进制格式 |  |
| `project` | Project! | 此标签所属的项目 |  |
| `todos` | [Todo!]! | 与此标签关联的记录 |  |
| `createdAt` | DateTime! | 标签创建时间 |  |
| `updatedAt` | DateTime! | 标签最后更新时间 |  |

### TagPagination 响应

| 字段 | 类型 | 描述 |
|-------|------|-------------|
| `items` | [Tag!]! | 标签记录数组 |  |
| `pageInfo` | PageInfo! | 分页信息 |  |
| `totalCount` | Int! | 匹配过滤器的标签总数 |  |

### PageInfo 字段

| 字段 | 类型 | 描述 |
|-------|------|-------------|
| `totalPages` | Int | 总页数 |  |
| `totalItems` | Int | 所有页面的总项目数 |  |
| `page` | Int | 当前页码 |  |
| `perPage` | Int | 每页项目数 |  |
| `hasNextPage` | Boolean! | 是否有下一页 |  |
| `hasPreviousPage` | Boolean! | 是否有上一页 |  |

## 所需权限

### 标签管理

| 操作 | 所需角色 |
|--------|--------------|
| Create tags | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |
| Edit tags | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |
| Delete tags | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |
| Apply tags to records | `OWNER`, `ADMIN`, `MEMBER`, or `CLIENT` |  |

### 标签可见性

标签对所有有权访问创建标签的项目的用户可见。某些操作可能会应用基于角色的过滤。

## 错误响应

### 标签未找到
```json
{
  "errors": [{
    "message": "Tag not found",
    "extensions": {
      "code": "NOT_FOUND"
    }
  }]
}
```

### 无效的颜色格式
```json
{
  "errors": [{
    "message": "Color must be in hex format (e.g., #ff0000)",
    "extensions": {
      "code": "BAD_USER_INPUT"
    }
  }]
}
```

### 权限被拒绝
```json
{
  "errors": [{
    "message": "You do not have permission to modify tags in this project",
    "extensions": {
      "code": "FORBIDDEN"
    }
  }]
}
```

### 记录未找到
```json
{
  "errors": [{
    "message": "Todo not found",
    "extensions": {
      "code": "NOT_FOUND"
    }
  }]
}
```

## 最佳实践

1. **使用一致的颜色**：为您的团队建立颜色编码系统
2. **描述性标题**：使用清晰、描述性的标签名称，以便团队成员理解
3. **批量操作**：使用 `setTodoTags` 一次应用多个标签
4. **搜索和过滤**：在创建新标签之前，使用搜索功能查找现有标签
5. **标签管理**：定期审查并清理未使用的标签
6. **颜色约定**：考虑为常见标签类型使用标准颜色（红色表示紧急，绿色表示已完成等）

## 高级功能

### 标签创建默认值

- 通过 `setTodoTags` 创建的新标签，默认颜色为 `tagTitles`
- 没有指定颜色的标签将回退到 `#00a0d2`
- 标签标题会自动去除空格

### 自动化集成

标签可以：
- 通过自动化规则自动应用
- 用作自动化工作流的触发器
- 通过自动化操作进行修改

### 实时更新

标签更改通过 GraphQL 订阅广播，允许连接客户端实时更新。

## 重要说明

- 删除标签会将其从所有关联记录中移除
- 标签是项目范围的，不能跨项目共享
- 颜色值必须是有效的十六进制代码（例如，“#ff0000”，“#00aa00”）
- 标签标题区分大小写
- 单个记录最多可以应用 100 个标签
- 标签支持对标题的全文搜索