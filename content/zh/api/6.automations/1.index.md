---
title: 列出所有自动化
description: 检索具有过滤选项的项目的分页自动化列表
---

## 列出所有自动化

Blue中的自动化允许您创建强大的工作流程，根据特定事件触发操作。此端点检索为您的项目配置的所有自动化，包括它们的触发器、操作和当前状态。

### 基本示例

```graphql
query ListAutomations {
  automationList {
    items {
      id
      isActive
      trigger {
        type
        color
      }
      actions {
        type
        color
      }
      createdAt
    }
    pageInfo {
      totalItems
      hasNextPage
    }
  }
}
```

### 高级示例

```graphql
query ListAutomationsAdvanced {
  automationList(
    filter: {
      customFieldIds: ["field_123", "field_456"]
    }
    skip: 0
    take: 50
  ) {
    items {
      id
      isActive
      createdAt
      updatedAt
      
      # Trigger details
      trigger {
        id
        type
        color
        metadata {
          ... on AutomationTriggerMetadataTodoOverdue {
            incompleteOnly
          }
        }
        customField {
          id
          name
          type
        }
        customFieldOptions {
          id
          title
          color
        }
        todoList {
          id
          title
        }
        tags {
          id
          title
          color
        }
        assignees {
          id
          name
          email
        }
      }
      
      # Action details
      actions {
        id
        type
        color
        duedIn
        assigneeTriggerer
        
        # Action-specific fields
        customField {
          id
          name
        }
        customFieldOptions {
          id
          title
        }
        todoList {
          id
          title
        }
        tags {
          id
          title
        }
        assignees {
          id
          name
        }
        
        # Email action metadata
        metadata {
          ... on AutomationActionMetadataSendEmail {
            email {
              subject
              to
              from
              content
            }
          }
          ... on AutomationActionMetadataCreateChecklist {
            checklists {
              title
              checklistItems {
                title
                duedIn
              }
            }
          }
        }
      }
      
      # Creator info
      createdBy {
        id
        name
        email
      }
    }
    
    pageInfo {
      totalItems
      totalPages
      hasNextPage
      hasPreviousPage
    }
    
    totalCount
  }
}
```

## 输入参数

### AutomationFilterInput

| 参数 | 类型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `customFieldIds` | [String] | 否 | 过滤与特定自定义字段相关的自动化 |  |

### 分页参数

| 参数 | 类型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `skip` | Int | 否 | 要跳过的项目数量（默认：0） |  |
| `take` | Int | 否 | 要返回的项目数量（默认：20） |  |

## 响应字段

### AutomationPagination

| 字段 | 类型 | 描述 |
|-------|------|-------------|
| `items` | [Automation!]! | 自动化对象列表 |  |
| `pageInfo` | PageInfo! | 分页信息 |  |
| `totalCount` | Int! | 自动化总数 |  |

### Automation

| 字段 | 类型 | 描述 |
|-------|------|-------------|
| `id` | ID! | 唯一标识符 |  |
| `trigger` | AutomationTrigger! | 触发此自动化的事件 |  |
| `actions` | [AutomationAction!]! | 触发时执行的操作 |  |
| `isActive` | Boolean! | 自动化当前是否处于活动状态 |  |
| `createdBy` | User! | 创建此自动化的用户 |  |
| `project` | Project! | 此自动化所属的项目 |  |
| `createdAt` | DateTime! | 创建时间戳 |  |
| `updatedAt` | DateTime! | 最后更新时间戳 |  |

### AutomationTrigger

| 字段 | 类型 | 描述 |
|-------|------|-------------|
| `id` | ID! | 唯一标识符 |  |
| `type` | AutomationTriggerType! | 触发事件的类型 |  |
| `color` | String | 关联颜色（十六进制格式） |  |
| `metadata` | AutomationTriggerMetadata | 触发器特定的配置 |  |
| `customField` | CustomField | 相关自定义字段（如适用） |  |
| `customFieldOptions` | [CustomFieldOption!] | 选择字段的选项 |  |
| `todos` | [CustomFieldReferenceTodo!] | 参考的待办事项 |  |
| `todoList` | TodoList | 相关待办事项列表 |  |
| `tags` | [Tag!] | 相关标签 |  |
| `assignees` | [User!] | 相关指派人 |  |

### AutomationAction

| 字段 | 类型 | 描述 |
|-------|------|-------------|
| `id` | ID! | 唯一标识符 |  |
| `type` | AutomationActionType! | 要执行的操作类型 |  |
| `color` | String | 关联颜色（十六进制格式） |  |
| `duedIn` | Int | 到期日期操作要添加的天数 |  |
| `assigneeTriggerer` | String | 特殊指派人标识符 |  |
| `metadata` | AutomationActionMetadata | 操作特定的配置 |  |
| `customField` | CustomField | 目标自定义字段 |  |
| `customFieldOptions` | [CustomFieldOption!] | 选择字段的选项 |  |
| `todoList` | TodoList | 目标待办事项列表 |  |
| `tags` | [Tag!] | 要添加/删除的标签 |  |
| `assignees` | [User!] | 要添加/删除的指派人 |  |
| `httpOption` | AutomationActionHttpOption | HTTP请求配置 |  |

## 触发类型

| 类型 | 描述 |
|------|-------------|
| `TODO_CREATED` | 当创建新记录时 |  |
| `TODO_LIST_CHANGED` | 当记录在列表之间移动时 |  |
| `TODO_MARKED_AS_COMPLETE` | 当记录完成时 |  |
| `TODO_MARKED_AS_INCOMPLETE` | 当记录未完成时 |  |
| `ASSIGNEE_ADDED` | 当指派人被添加时 |  |
| `ASSIGNEE_REMOVED` | 当指派人被移除时 |  |
| `DUE_DATE_CHANGED` | 当到期日期被修改时 |  |
| `DUE_DATE_REMOVED` | 当到期日期被清除时 |  |
| `DUE_DATE_EXPIRED` | 当到期日期过期时 |  |
| `TAG_ADDED` | 当添加标签时 |  |
| `TAG_REMOVED` | 当移除标签时 |  |
| `CHECKLIST_ITEM_MARKED_AS_DONE` | 当检查清单项完成时 |  |
| `CHECKLIST_ITEM_MARKED_AS_UNDONE` | 当检查清单项未完成时 |  |
| `TODO_COPIED_OR_MOVED_FROM_OTHER_PROJECT` | 当记录被导入时 |  |
| `CUSTOM_FIELD_ADDED` | 当自定义字段值被设置时 |  |
| `CUSTOM_FIELD_REMOVED` | 当自定义字段值被清除时 |  |
| `CUSTOM_FIELD_BUTTON_CLICKED` | 当按钮字段被点击时 |  |
| `COLOR_ADDED` | 当应用颜色时 |  |
| `COLOR_REMOVED` | 当移除颜色时 |  |

## 操作类型

| 类型 | 描述 |
|------|-------------|
| `CHANGE_TODO_LIST` | 将记录移动到不同的列表 |  |
| `MARK_AS_COMPLETE` | 完成记录 |  |
| `MARK_AS_INCOMPLETE` | 取消完成记录 |  |
| `ADD_ASSIGNEE` | 添加指派人 |  |
| `REMOVE_ASSIGNEE` | 移除指派人 |  |
| `ADD_ASSIGNEE_TRIGGERER` | 添加触发自动化的用户 |  |
| `CHANGE_DUE_DATE` | 设置或更新到期日期 |  |
| `REMOVE_DUE_DATE` | 清除到期日期 |  |
| `ADD_TAG` | 应用标签 |  |
| `REMOVE_TAG` | 移除标签 |  |
| `ADD_COLOR` | 应用颜色 |  |
| `REMOVE_COLOR` | 移除颜色 |  |
| `ADD_CUSTOM_FIELD` | 设置自定义字段值 |  |
| `REMOVE_CUSTOM_FIELD` | 清除自定义字段值 |  |
| `CREATE_CHECKLIST` | 创建新的检查清单 |  |
| `MARK_CHECKLIST_ITEM_AS_DONE` | 完成检查清单项 |  |
| `MARK_CHECKLIST_ITEM_AS_UNDONE` | 取消完成检查清单项 |  |
| `COPY_TODO` | 复制记录 |  |
| `SEND_EMAIL` | 发送电子邮件通知 |  |
| `GENERATE_PDF` | 生成PDF文档 |  |
| `MAKE_HTTP_REQUEST` | 调用外部API |  |

## 所需权限

列出自动化需要身份验证和项目访问：

| 角色 | 可以列出自动化 |
|------|---------------------|
| `OWNER` | ✅ 是 |  |
| `ADMIN` | ✅ 是 |  |
| `MEMBER` | ✅ 是 |  |
| `CLIENT` | ✅ 是 |  |

所有经过身份验证的用户只要有项目访问权限即可查看自动化。

## 错误响应

### 需要身份验证
```json
{
  "errors": [{
    "message": "You must be logged in",
    "extensions": {
      "code": "UNAUTHENTICATED"
    }
  }]
}
```

### 找不到项目
```json
{
  "errors": [{
    "message": "Project not found",
    "extensions": {
      "code": "PROJECT_NOT_FOUND"
    }
  }]
}
```

## 重要说明

- **排序**：自动化始终按创建日期从新到旧返回
- **项目范围**：自动化的范围限于当前项目上下文
- **活动状态**：检查 `isActive` 以确定自动化当前是否正在运行
- **元数据**：某些触发器和操作具有额外的元数据以供配置
- **性能**：对于具有许多自动化的项目，请使用分页
- **过滤**：当前仅支持按自定义字段ID进行过滤