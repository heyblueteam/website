---
title: 模板
description: 模板允许您重用现有项目的结构，以启动具有相同框架的新项目。
---

## 模板概述

Blue 支持两种类型的模板：
- **公司模板**：由您的组织创建供内部使用
- **官方模板**：由 Blue 为所有用户创建（行业标准模板）

模板保留整个项目结构，包括待办事项、列表、自定义字段、自动化等。

## 列表模板

### 使用模板查询

```graphql
query GetTemplates {
  templates(
    companyId: "company-123"
    isOfficialTemplate: false
    category: MARKETING
  ) {
    id
    name
    description
    category
    isOfficialTemplate
    icon
    color
    image {
      thumbnail
      small
    }
  }
}
```

### 使用 projectList 和模板过滤器

```graphql
query ListTemplates {
  projectList(
    filter: {
      companyIds: ["company-id"]
      isTemplate: true
    }
    sort: [updatedAt_DESC]
    take: 20
    skip: 0
  ) {
    items {
      id
      slug
      name
      description
      category
      isTemplate
      isOfficialTemplate
      color
      icon
      createdAt
      updatedAt
    }
    pageInfo {
      hasNextPage
      totalItems
    }
    totalCount
  }
}
```

## 从模板创建项目

要从现有模板创建新项目：

```graphql
mutation CreateFromTemplate {
  createProject(
    input: {
      templateId: "template-id-or-slug"
      name: "Q1 Marketing Campaign"
      companyId: "company-id"
      description: "Marketing initiatives for Q1"
      color: "#10B981"
    }
  ) {
    id
    name
    slug
  }
}
```

::callout
---  
icon: circle-inf---  
从模板创建是一个异步过程。项目会立即创建，但内容会在后台复制。使用 `copyProjectStatus` 查询来跟踪进度。  
::

## 将项目转换为模板

将现有项目转换为可重用模板：

```graphql
mutation ConvertToTemplate {
  convertProjectToTemplate(
    input: {
      projectId: "project-123"
      isOfficialTemplate: false
    }
  ) {
    id
    name
    isTemplate
    isOfficialTemplate
  }
}
```

## 移除模板状态

将模板转换回常规项目：

```graphql
mutation RemoveTemplateStatus {
  removeProjectFromTemplates(projectId: "template-123") {
    id
    name
    isTemplate
  }
}
```

## 获取单个模板

检索特定模板的详细信息：

```graphql
query GetTemplate {
  template(templateId: "template-123") {
    id
    name
    description
    category
    isOfficialTemplate
    todoLists {
      name
      todos {
        title
      }
    }
  }
}
```

## 查询参数

### templates 查询

| 参数 | 类型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `companyId` | String | 否 | 按公司过滤模板。省略以查看官方模板。 |  |
| `isOfficialTemplate` | Boolean | 否 | 仅显示官方 Blue 模板 |  |
| `category` | ProjectCategory | 否 | 按项目类别过滤 |  |

### convertProjectToTemplate 输入

| 参数 | 类型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `projectId` | String! | ✅ 是 | 要转换为模板的项目 |  |
| `isOfficialTemplate` | Boolean! | ✅ 是 | 标记为官方模板（仅限 Blue 员工） |  |

### 模板类别

| 值 | 描述 |
|-------|-------------|
| `CRM` | 客户关系管理 |  |
| `CROSS_FUNCTIONAL` | 跨职能团队项目 |  |
| `CUSTOMER_SUCCESS` | 客户成功计划 |  |
| `DESIGN` | 设计和创意项目 |  |
| `ENGINEERING` | 工程和开发 |  |
| `GENERAL` | 一般项目（默认） |  |
| `HR` | 人力资源 |  |
| `IT` | 信息技术 |  |
| `MARKETING` | 营销活动 |  |
| `OPERATIONS` | 运营和物流 |  |
| `PRODUCT` | 产品管理 |  |
| `SALES` | 销售和业务发展 |  |

## 从模板复制的内容

从模板创建项目时，以下内容会被复制：

- ✅ **结构**：所有待办事项列表及其位置
- ✅ **内容**：描述、评论和附件
- ✅ **组织**：标签、标签和自定义字段
- ✅ **自动化**：所有自动化规则和工作流
- ✅ **表单**：项目表单及其配置
- ✅ **文档**：维基页面和文档
- ✅ **设置**：封面配置和显示偏好
- ✅ **角色**：用户角色定义（但不包括用户分配）

未复制：
- ❌ 用户分配（除创建者外）
- ❌ 活动历史
- ❌ 时间跟踪数据
- ❌ 待办事项的完成状态

## 所需权限

### 创建模板

| 操作 | 所需角色 |
|--------|--------------|
| Convert project to template | Project `OWNER` or `ADMIN` |  |
| Create official template | Blue employee only |  |
| Remove template status | Project `OWNER` or `ADMIN` |  |

### 使用模板

| 模板类型 | 谁可以使用 |
|--------------|-------------|
| Company templates | Users in the same company |  |
| Official templates | All Blue users |  |

## 错误响应

### 找不到模板
```json
{
  "errors": [{
    "message": "Template not found",
    "extensions": {
      "code": "TEMPLATE_NOT_FOUND"
    }
  }]
}
```

### 待办事项过多
```json
{
  "errors": [{
    "message": "This project has more than 250,000 todos and cannot be used as a template",
    "extensions": {
      "code": "TOO_MANY_TODOS"
    }
  }]
}
```

## 重要说明

- **大小限制**：超过 250,000 个待办事项的项目不能用作模板
- **异步复制**：模板内容通过作业队列在后台复制
- **归档状态**：转换为模板会自动取消归档项目
- **文件夹移除**：转换时模板会从文件夹中移除
- **访问控制**：官方模板对所有人可见，公司模板仅对成员可见
- **实时更新**：使用 `subscribeToProject` 订阅模板更改