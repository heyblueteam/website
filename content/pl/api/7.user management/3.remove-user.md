---
title: Usuń użytkowników
description: Usuń użytkowników z projektów lub firm za pomocą API Blue.
---

## Usuń użytkowników

Ta strona opisuje, jak usunąć użytkowników z projektów i firm. Usunięcie użytkownika to trwała akcja, która odznacza użytkownika we wszystkich rekordach i usuwa jego dostęp, chociaż jego dane historyczne są zachowywane w celach audytowych.

## Usuń użytkownika z projektu

Usuń użytkownika z konkretnego projektu, zachowując jego dostęp do firmy.

### Podstawowy przykład

```graphql
mutation {
  removeProjectUser(
    input: {
      projectId: "project-id"
      userId: "user-id"
    }
  ) {
    success
    operationId
  }
}
```

### Przykład odpowiedzi

```json
{
  "data": {
    "removeProjectUser": {
      "success": true,
      "operationId": null
    }
  }
}
```

**Uwaga:** Pole `operationId` obecnie nie jest wypełniane przez tę mutację i zwróci `null`.

## Usuń użytkownika z firmy

Usuń użytkownika z całej firmy, co ma wpływ na wszystkie projekty.

### Podstawowy przykład

```graphql
mutation {
  removeCompanyUser(
    input: {
      companyId: "company-id"
      userId: "user-id"
    }
  )
}
```

### Przykład odpowiedzi

```json
{
  "data": {
    "removeCompanyUser": true
  }
}
```

## Parametry wejściowe

### RemoveProjectUserInput

| Parametr | Typ | Wymagane | Opis |
|----------|-----|----------|------|
| `projectId` | String! | ✅ Tak | ID projektu (nie slug) |  |
| `userId` | String! | ✅ Tak | ID użytkownika do usunięcia |  |

### RemoveCompanyUserInput

| Parametr | Typ | Wymagane | Opis |
|----------|-----|----------|------|
| `companyId` | String! | ✅ Tak | ID lub slug firmy |  |
| `userId` | String! | ✅ Tak | ID użytkownika do usunięcia |  |

## Pola odpowiedzi

### Odpowiedź RemoveProjectUser

| Pole | Typ | Opis |
|------|-----|------|
| `success` | Boolean! | Czy operacja zakończyła się sukcesem |  |
| `operationId` | String | Unikalny identyfikator operacji (obecnie zwraca `null`) |  |

### Odpowiedź RemoveCompanyUser

Mutacja `removeCompanyUser` zwraca prostą wartość `Boolean`:
- `true` - Użytkownik został pomyślnie usunięty

## Wymagane uprawnienia

### Usunięcie użytkownika z projektu

| Rola | Może usuwać użytkowników |
|------|-------------------------|
| `OWNER` | ✅ Tak |  |
| `ADMIN` | ✅ Tak |  |
| `MEMBER` | ❌ Nie |  |
| `READ_ONLY` | ❌ Nie |  |

**Ważne uwagi:**
- Nie możesz usuwać użytkowników z rolą `OWNER` z projektu
- System uniemożliwia usunięcie właścicieli projektów w celu zachowania integralności własności projektu

### Usunięcie użytkownika z firmy

| Rola | Może usuwać użytkowników |
|------|-------------------------|
| `OWNER` | ✅ Tak |  |
| `ADMIN` | ❌ Nie |  |
| `MEMBER` | ❌ Nie |  |
| `READ_ONLY` | ❌ Nie |  |

**Uwaga:** Tylko właściciele firmy mogą usuwać użytkowników z firmy. Rozwiązywacz wymusza ścisły dostęp tylko dla WŁAŚCICIELA do operacji usuwania użytkowników z firmy.

## Efekty uboczne

### Usunięcie projektu
- Usuwa wszystkie przypisania zadań dla użytkownika w tym projekcie
- Usuwa foldery projektu użytkownika
- Usuwa relację użytkownika z projektem
- Wysyła aktualizacje w czasie rzeczywistym, aby powiadomić innych użytkowników
- Tworzy wpis w dzienniku audytu

### Usunięcie firmy
- **Kaskadowe usunięcie we wszystkich projektach:**
  - Usuwa wszystkie przypisania zadań we wszystkich projektach firmy
  - Usuwa wszystkie foldery użytkowników projektów
  - Usuwa użytkownika ze wszystkich projektów firmy
- Usuwa foldery użytkowników firmy
- Usuwa użytkownika z firmy
- Wysyła e-mail powiadamiający o usunięciu do usuniętego użytkownika
- **Aktualizuje rozliczenia (jeśli cena za użytkownika):**
  - Przelicza liczbę aktywnych użytkowników
  - Aktualizuje ilość subskrypcji Stripe
- Tworzy wpis w dzienniku audytu

## Odpowiedzi błędów

### Projekt nie znaleziony
```json
{
  "errors": [{
    "message": "Project was not found.",
    "extensions": {
      "code": "PROJECT_NOT_FOUND"
    }
  }]
}
```

### Użytkownik nie znaleziony
```json
{
  "errors": [{
    "message": "User was not found.",
    "extensions": {
      "code": "USER_NOT_FOUND"
    }
  }]
}
```

### Błąd nieautoryzowany
```json
{
  "errors": [{
    "message": "You are not authorized.",
    "extensions": {
      "code": "FORBIDDEN"
    }
  }]
}
```

### Firma nie znaleziona (tylko removeCompanyUser)
```json
{
  "errors": [{
    "message": "Company was not found.",
    "extensions": {
      "code": "COMPANY_NOT_FOUND"
    }
  }]
}
```

Ten błąd występuje, gdy:
- Nie masz wymaganej roli (WŁAŚCICIEL/ADMIN dla projektów, WŁAŚCICIEL dla firmy)
- Próbujesz usunąć właściciela projektu
- Użytkownik nie jest częścią projektu/firmy

## Ważne rozważania

- **Zachowanie danych**: Usunięcie użytkownika nie jest odwracalne. Choć użytkownik traci dostęp, jego dane historyczne (komentarze, dzienniki aktywności itp.) są zachowywane w celach audytowych.
- **Ochrona właściciela**: Właściciele projektów nie mogą być usuwani z projektów. W razie potrzeby najpierw przenieś własność.
- **Wpływ na rozliczenia**: Usunięcie użytkownika z firmy automatycznie aktualizuje subskrypcję, jeśli korzystasz z cen za użytkownika.
- **Powiadomienie e-mail**: Usunięcie firmy wysyła powiadomienie e-mail do usuniętego użytkownika.
- **Efekt kaskadowy**: Usunięcie firmy wpływa na wszystkie projekty, podczas gdy usunięcie projektu jest ograniczone do tego konkretnego projektu.

## Powiązane operacje

- [Lista użytkowników](/api/user-management/list-users) - Zobacz użytkowników przed usunięciem
- [Pobierz niestandardową rolę](/api/user-management/retrieve-custom-role) - Sprawdź uprawnienia użytkownika
- [Utwórz projekt](/api/projects/create-project) - Dodaj użytkowników do nowych projektów