---
title: Przełącz status rekordu
description: Przełącz rekord między statusami ukończonym i nieukończonym za pomocą pojedynczej mutacji.
---

## Przełącz status rekordu

Mutacja `updateTodoDoneStatus` zapewnia prosty sposób na przełączenie statusu ukończenia rekordu. Jeśli rekord jest nieukończony, oznacza go jako ukończony. Jeśli jest ukończony, oznacza go jako nieukończony.

### Przykład

```graphql
mutation ToggleRecordStatus {
  updateTodoDoneStatus(todoId: "todo_123") {
    id
    title
    done
    updatedAt
  }
}
```

## Parametry wejściowe

| Parametr | Typ | Wymagane | Opis |
|----------|-----|----------|------|
| `todoId` | String! | ✅ Tak | ID rekordu do przełączenia |

## Odpowiedź

Zwraca zaktualizowany obiekt `Todo` ze wszystkimi dostępnymi polami. Powszechnie używane pola obejmują:

- `id` - Identyfikator rekordu
- `title` - Tytuł rekordu
- `done` - Nowy status ukończenia (prawda/fałsz)
- `updatedAt` - Znacznik czasu aktualizacji
- Wszystkie inne [pola Todo](/api/records/list-records#todo-fields) są dostępne

## Wymagane uprawnienia

| Poziom dostępu | Może przełączać status |
|----------------|------------------------|
| `OWNER` | ✅ Tak |
| `ADMIN` | ✅ Tak |
| `MEMBER` | ✅ Tak |
| `CLIENT` | ✅ Tak |
| `COMMENT_ONLY` | ❌ Nie |
| `VIEW_ONLY` | ❌ Nie |

**Uwaga**: Niestandardowe role z `allowMarkRecordsAsDone: false` będą zablokowane przed używaniem tej mutacji.

## Odpowiedzi błędów

### TodoNotFoundError
```json
{
  "errors": [{
    "message": "Todo was not found.",
    "extensions": {
      "code": "TODO_NOT_FOUND"
    }
  }]
}
```

### UnauthorizedError
```json
{
  "errors": [{
    "message": "You are not authorized.",
    "extensions": {
      "code": "UNAUTHORIZED"
    }
  }]
}
```

## Ważne uwagi

### Efekty uboczne
Przełączanie statusu rekordu wyzwala kilka automatycznych działań:

- **Dziennik aktywności**: Tworzy wpisy dla MARK_AS_COMPLETE lub MARK_AS_INCOMPLETE
- **Webhooki**: Wysyła powiadomienia do skonfigurowanych punktów końcowych webhooków z stanami przed/po
- **Automatyzacje**: Wyzwala zasady automatyzacji TODO_MARKED_AS_COMPLETE lub TODO_MARKED_AS_INCOMPLETE
- **Powiadomienia w czasie rzeczywistym**: Wysyła aktualizacje do odpowiednich użytkowników (jeśli skonfigurowane)
- **Publikacja w czasie rzeczywistym**: Publikuje aktualizacje todo do połączonych klientów
- **Śledzenie czasu**: Automatycznie aktualizuje niestandardowe pola czasu trwania
- **Indeks wyszukiwania**: Aktualizuje indeks wyszukiwania dla lepszej wykrywalności
- **Analizy**: Aktualizuje wykresy i raporty
- **Kanał aktywności**: Ukończone rekordy pojawiają się w kanale aktywności firmy

### Wskazówki dotyczące użytkowania
- Mutacja jest idempotentna - wywołanie jej dwa razy przywraca rekord do pierwotnego stanu
- Operacja jest atomowa - albo kończy się całkowitym sukcesem, albo nie udaje się bez zmian
- Niestandardowe role mogą ograniczać tę akcję za pomocą uprawnienia `allowMarkRecordsAsDone`

### Powiązane punkty końcowe
- **Lista rekordów**: Użyj `todoQueries.todos`, aby zapytać i filtrować rekordy
- **Aktualizacja zbiorcza**: Użyj `updateTodos`, aby zmodyfikować wiele rekordów jednocześnie