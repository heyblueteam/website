---
title: Lister toutes les automatisations
description: Récupérer une liste paginée d'automatisations pour un projet avec des options de filtrage
---

## Lister toutes les automatisations

Les automatisations dans Blue vous permettent de créer des flux de travail puissants qui déclenchent des actions basées sur des événements spécifiques. Ce point de terminaison récupère toutes les automatisations configurées pour votre projet, y compris leurs déclencheurs, actions et état actuel.

### Exemple de base

```graphql
query ListAutomations {
  automationList {
    items {
      id
      isActive
      trigger {
        type
        color
      }
      actions {
        type
        color
      }
      createdAt
    }
    pageInfo {
      totalItems
      hasNextPage
    }
  }
}
```

### Exemple avancé

```graphql
query ListAutomationsAdvanced {
  automationList(
    filter: {
      customFieldIds: ["field_123", "field_456"]
    }
    skip: 0
    take: 50
  ) {
    items {
      id
      isActive
      createdAt
      updatedAt
      
      # Trigger details
      trigger {
        id
        type
        color
        metadata {
          ... on AutomationTriggerMetadataTodoOverdue {
            incompleteOnly
          }
        }
        customField {
          id
          name
          type
        }
        customFieldOptions {
          id
          title
          color
        }
        todoList {
          id
          title
        }
        tags {
          id
          title
          color
        }
        assignees {
          id
          name
          email
        }
      }
      
      # Action details
      actions {
        id
        type
        color
        duedIn
        assigneeTriggerer
        
        # Action-specific fields
        customField {
          id
          name
        }
        customFieldOptions {
          id
          title
        }
        todoList {
          id
          title
        }
        tags {
          id
          title
        }
        assignees {
          id
          name
        }
        
        # Email action metadata
        metadata {
          ... on AutomationActionMetadataSendEmail {
            email {
              subject
              to
              from
              content
            }
          }
          ... on AutomationActionMetadataCreateChecklist {
            checklists {
              title
              checklistItems {
                title
                duedIn
              }
            }
          }
        }
      }
      
      # Creator info
      createdBy {
        id
        name
        email
      }
    }
    
    pageInfo {
      totalItems
      totalPages
      hasNextPage
      hasPreviousPage
    }
    
    totalCount
  }
}
```

## Paramètres d'entrée

### AutomationFilterInput

| Paramètre | Type | Requis | Description |
|-----------|------|--------|-------------|
| `customFieldIds` | [String] | Non | Filtrer les automatisations liées à des champs personnalisés spécifiques |  |

### Paramètres de pagination

| Paramètre | Type | Requis | Description |
|-----------|------|--------|-------------|
| `skip` | Int | Non | Nombre d'éléments à ignorer (par défaut : 0) |  |
| `take` | Int | Non | Nombre d'éléments à retourner (par défaut : 20) |  |

## Champs de réponse

### AutomationPagination

| Champ | Type | Description |
|-------|------|-------------|
| `items` | [Automation!]! | Liste des objets d'automatisation |  |
| `pageInfo` | PageInfo! | Informations de pagination |  |
| `totalCount` | Int! | Nombre total d'automatisations |  |

### Automation

| Champ | Type | Description |
|-------|------|-------------|
| `id` | ID! | Identifiant unique |  |
| `trigger` | AutomationTrigger! | L'événement qui déclenche cette automatisation |  |
| `actions` | [AutomationAction!]! | Actions effectuées lors du déclenchement |  |
| `isActive` | Boolean! | Indique si l'automatisation est actuellement active |  |
| `createdBy` | User! | Utilisateur qui a créé l'automatisation |  |
| `project` | Project! | Projet auquel appartient cette automatisation |  |
| `createdAt` | DateTime! | Horodatage de création |  |
| `updatedAt` | DateTime! | Horodatage de dernière mise à jour |  |

### AutomationTrigger

| Champ | Type | Description |
|-------|------|-------------|
| `id` | ID! | Identifiant unique |  |
| `type` | AutomationTriggerType! | Type d'événement de déclenchement |  |
| `color` | String | Couleur associée (format hexadécimal) |  |
| `metadata` | AutomationTriggerMetadata | Configuration spécifique au déclencheur |  |
| `customField` | CustomField | Champ personnalisé associé (le cas échéant) |  |
| `customFieldOptions` | [CustomFieldOption!] | Options sélectionnées pour les champs de sélection |  |
| `todos` | [CustomFieldReferenceTodo!] | Todos référencés |  |
| `todoList` | TodoList | Liste de todo associée |  |
| `tags` | [Tag!] | Tags associés |  |
| `assignees` | [User!] | Assignés associés |  |

### AutomationAction

| Champ | Type | Description |
|-------|------|-------------|
| `id` | ID! | Identifiant unique |  |
| `type` | AutomationActionType! | Type d'action à effectuer |  |
| `color` | String | Couleur associée (format hexadécimal) |  |
| `duedIn` | Int | Jours à ajouter pour les actions de date d'échéance |  |
| `assigneeTriggerer` | String | Identifiant d'assigné spécial |  |
| `metadata` | AutomationActionMetadata | Configuration spécifique à l'action |  |
| `customField` | CustomField | Champ personnalisé cible |  |
| `customFieldOptions` | [CustomFieldOption!] | Options pour les champs de sélection |  |
| `todoList` | TodoList | Liste de todo cible |  |
| `tags` | [Tag!] | Tags à ajouter/retirer |  |
| `assignees` | [User!] | Assignés à ajouter/retirer |  |
| `httpOption` | AutomationActionHttpOption | Configuration de la requête HTTP |  |

## Types de déclencheurs

| Type | Description |
|------|-------------|
| `TODO_CREATED` | Lorsqu'un nouvel enregistrement est créé |  |
| `TODO_LIST_CHANGED` | Lorsqu'un enregistrement passe entre des listes |  |
| `TODO_MARKED_AS_COMPLETE` | Lorsqu'un enregistrement est complété |  |
| `TODO_MARKED_AS_INCOMPLETE` | Lorsqu'un enregistrement est non complété |  |
| `ASSIGNEE_ADDED` | Lorsqu'un assigné est ajouté |  |
| `ASSIGNEE_REMOVED` | Lorsqu'un assigné est retiré |  |
| `DUE_DATE_CHANGED` | Lorsqu'une date d'échéance est modifiée |  |
| `DUE_DATE_REMOVED` | Lorsqu'une date d'échéance est effacée |  |
| `DUE_DATE_EXPIRED` | Lorsqu'une date d'échéance est dépassée |  |
| `TAG_ADDED` | Lorsqu'un tag est ajouté |  |
| `TAG_REMOVED` | Lorsqu'un tag est retiré |  |
| `CHECKLIST_ITEM_MARKED_AS_DONE` | Lorsqu'un élément de la checklist est complété |  |
| `CHECKLIST_ITEM_MARKED_AS_UNDONE` | Lorsqu'un élément de la checklist est non complété |  |
| `TODO_COPIED_OR_MOVED_FROM_OTHER_PROJECT` | Lorsqu'un enregistrement est importé |  |
| `CUSTOM_FIELD_ADDED` | Lorsqu'une valeur de champ personnalisé est définie |  |
| `CUSTOM_FIELD_REMOVED` | Lorsqu'une valeur de champ personnalisé est effacée |  |
| `CUSTOM_FIELD_BUTTON_CLICKED` | Lorsqu'un champ de bouton est cliqué |  |
| `COLOR_ADDED` | Lorsqu'une couleur est appliquée |  |
| `COLOR_REMOVED` | Lorsqu'une couleur est retirée |  |

## Types d'actions

| Type | Description |
|------|-------------|
| `CHANGE_TODO_LIST` | Déplacer l'enregistrement vers une liste différente |  |
| `MARK_AS_COMPLETE` | Compléter l'enregistrement |  |
| `MARK_AS_INCOMPLETE` | Non compléter l'enregistrement |  |
| `ADD_ASSIGNEE` | Ajouter des assignés |  |
| `REMOVE_ASSIGNEE` | Retirer des assignés |  |
| `ADD_ASSIGNEE_TRIGGERER` | Ajouter l'utilisateur qui a déclenché l'automatisation |  |
| `CHANGE_DUE_DATE` | Définir ou mettre à jour la date d'échéance |  |
| `REMOVE_DUE_DATE` | Effacer la date d'échéance |  |
| `ADD_TAG` | Appliquer des tags |  |
| `REMOVE_TAG` | Retirer des tags |  |
| `ADD_COLOR` | Appliquer une couleur |  |
| `REMOVE_COLOR` | Retirer une couleur |  |
| `ADD_CUSTOM_FIELD` | Définir la valeur d'un champ personnalisé |  |
| `REMOVE_CUSTOM_FIELD` | Effacer la valeur d'un champ personnalisé |  |
| `CREATE_CHECKLIST` | Créer une nouvelle checklist |  |
| `MARK_CHECKLIST_ITEM_AS_DONE` | Compléter des éléments de checklist |  |
| `MARK_CHECKLIST_ITEM_AS_UNDONE` | Non compléter des éléments de checklist |  |
| `COPY_TODO` | Dupliquer l'enregistrement |  |
| `SEND_EMAIL` | Envoyer une notification par e-mail |  |
| `GENERATE_PDF` | Générer un document PDF |  |
| `MAKE_HTTP_REQUEST` | Appeler une API externe |  |

## Permissions requises

Lister les automatisations nécessite une authentification et un accès au projet :

| Rôle | Peut lister les automatisations |
|------|-------------------------------|
| `OWNER` | ✅ Oui |  |
| `ADMIN` | ✅ Oui |  |
| `MEMBER` | ✅ Oui |  |
| `CLIENT` | ✅ Oui |  |

Tous les utilisateurs authentifiés ayant accès au projet peuvent voir les automatisations.

## Réponses d'erreur

### Authentification requise
```json
{
  "errors": [{
    "message": "You must be logged in",
    "extensions": {
      "code": "UNAUTHENTICATED"
    }
  }]
}
```

### Projet non trouvé
```json
{
  "errors": [{
    "message": "Project not found",
    "extensions": {
      "code": "PROJECT_NOT_FOUND"
    }
  }]
}
```

## Notes importantes

- **Ordre** : Les automatisations sont toujours retournées par ordre décroissant (par date de création)
- **Portée du projet** : Les automatisations sont limitées au contexte du projet actuel
- **État actif** : Vérifiez `isActive` pour déterminer si une automatisation est actuellement en cours d'exécution
- **Métadonnées** : Certains déclencheurs et actions ont des métadonnées supplémentaires pour la configuration
- **Performance** : Utilisez la pagination pour les projets avec de nombreuses automatisations
- **Filtrage** : Actuellement, ne prend en charge que le filtrage par identifiants de champs personnalisés