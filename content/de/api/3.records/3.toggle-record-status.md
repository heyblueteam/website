---
title: Status eines Datensatzes umschalten
description: Schalten Sie einen Datensatz mit einer einzigen Mutation zwischen dem Status "vollständig" und "unvollständig".
---

## Status eines Datensatzes umschalten

Die `updateTodoDoneStatus`-Mutation bietet eine einfache Möglichkeit, den Abschlussstatus eines Datensatzes umzuschalten. Wenn der Datensatz unvollständig ist, wird er als vollständig markiert. Wenn er vollständig ist, wird er als unvollständig markiert.

### Beispiel

```graphql
mutation ToggleRecordStatus {
  updateTodoDoneStatus(todoId: "todo_123") {
    id
    title
    done
    updatedAt
  }
}
```

## Eingabeparameter

| Parameter | Typ | Erforderlich | Beschreibung |
|-----------|------|--------------|-------------|
| `todoId` | String! | ✅ Ja | Die ID des Datensatzes, dessen Status umgeschaltet werden soll |

## Antwort

Gibt das aktualisierte `Todo`-Objekt mit allen verfügbaren Feldern zurück. Häufig verwendete Felder sind:

- `id` - Datensatz-Identifikator
- `title` - Titel des Datensatzes
- `done` - Neuer Abschlussstatus (true/false)
- `updatedAt` - Zeitstempel der Aktualisierung
- Alle anderen [Todo-Felder](/api/records/list-records#todo-fields) sind verfügbar

## Erforderliche Berechtigungen

| Zugriffslevel | Kann Status umschalten |
|---------------|------------------------|
| `OWNER` | ✅ Ja |
| `ADMIN` | ✅ Ja |
| `MEMBER` | ✅ Ja |
| `CLIENT` | ✅ Ja |
| `COMMENT_ONLY` | ❌ Nein |
| `VIEW_ONLY` | ❌ Nein |

**Hinweis**: Benutzerdefinierte Rollen mit `allowMarkRecordsAsDone: false` werden von der Verwendung dieser Mutation ausgeschlossen.

## Fehlerantworten

### TodoNotFoundError
```json
{
  "errors": [{
    "message": "Todo was not found.",
    "extensions": {
      "code": "TODO_NOT_FOUND"
    }
  }]
}
```

### UnauthorizedError
```json
{
  "errors": [{
    "message": "You are not authorized.",
    "extensions": {
      "code": "UNAUTHORIZED"
    }
  }]
}
```

## Wichtige Hinweise

### Nebenwirkungen
Das Umschalten des Status eines Datensatzes löst mehrere automatisierte Aktionen aus:

- **Aktivitätsprotokoll**: Erstellt Einträge für MARK_AS_COMPLETE oder MARK_AS_INCOMPLETE
- **Webhooks**: Sendet Benachrichtigungen an konfigurierte Webhook-Endpunkte mit Vorher-/Nachher-Zuständen
- **Automatisierungen**: Löst TODO_MARKED_AS_COMPLETE oder TODO_MARKED_AS_INCOMPLETE Automatisierungsregeln aus
- **Echtzeitbenachrichtigungen**: Sendet Updates an relevante Benutzer (sofern konfiguriert)
- **Echtzeitveröffentlichung**: Veröffentlicht Todo-Updates an verbundene Clients
- **Zeiterfassung**: Aktualisiert die Dauer benutzerdefinierter Felder automatisch
- **Suchindex**: Aktualisiert den Suchindex für verbesserte Auffindbarkeit
- **Analytik**: Aktualisiert Diagramme und Berichte
- **Aktivitätsfeed**: Abgeschlossene Datensätze erscheinen im Unternehmensaktivitätsfeed

### Nutzungstipps
- Die Mutation ist idempotent - ein zweimaliger Aufruf stellt den Datensatz in seinen ursprünglichen Zustand zurück
- Der Vorgang ist atomar - entweder wird er vollständig erfolgreich oder schlägt fehl, ohne Änderungen vorzunehmen
- Benutzerdefinierte Rollen können diese Aktion über die `allowMarkRecordsAsDone`-Berechtigung einschränken

### Verwandte Endpunkte
- **Datensätze auflisten**: Verwenden Sie `todoQueries.todos`, um Datensätze abzufragen und zu filtern
- **Bulk-Aktualisierung**: Verwenden Sie `updateTodos`, um mehrere Datensätze gleichzeitig zu ändern