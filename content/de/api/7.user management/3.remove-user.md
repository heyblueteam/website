---
title: Benutzer entfernen
description: Entfernen Sie Benutzer aus Projekten oder Unternehmen mit der Blue API.
---

## Benutzer entfernen

Diese Seite beschreibt, wie Benutzer aus Projekten und Unternehmen entfernt werden. Das Entfernen von Benutzern ist eine permanente Aktion, die den Benutzer von allen Datensätzen abmeldet und den Zugriff entfernt, obwohl ihre historischen Daten aus Prüfungszwecken erhalten bleiben.

## Benutzer aus Projekt entfernen

Entfernen Sie einen Benutzer aus einem bestimmten Projekt, während der Zugriff auf das Unternehmen erhalten bleibt.

### Einfaches Beispiel

```graphql
mutation {
  removeProjectUser(
    input: {
      projectId: "project-id"
      userId: "user-id"
    }
  ) {
    success
    operationId
  }
}
```

### Antwortbeispiel

```json
{
  "data": {
    "removeProjectUser": {
      "success": true,
      "operationId": null
    }
  }
}
```

**Hinweis:** Das `operationId` Feld wird derzeit nicht von dieser Mutation befüllt und gibt `null` zurück.

## Benutzer aus Unternehmen entfernen

Entfernen Sie einen Benutzer aus dem gesamten Unternehmen, was sich auf alle Projekte auswirkt.

### Einfaches Beispiel

```graphql
mutation {
  removeCompanyUser(
    input: {
      companyId: "company-id"
      userId: "user-id"
    }
  )
}
```

### Antwortbeispiel

```json
{
  "data": {
    "removeCompanyUser": true
  }
}
```

## Eingabeparameter

### RemoveProjectUserInput

| Parameter | Typ | Erforderlich | Beschreibung |
|-----------|------|----------|-------------|
| `projectId` | String! | ✅ Ja | Die ID des Projekts (nicht Slug) |  |
| `userId` | String! | ✅ Ja | Die ID des zu entfernenden Benutzers |  |

### RemoveCompanyUserInput

| Parameter | Typ | Erforderlich | Beschreibung |
|-----------|------|----------|-------------|
| `companyId` | String! | ✅ Ja | Die ID oder der Slug des Unternehmens |  |
| `userId` | String! | ✅ Ja | Die ID des zu entfernenden Benutzers |  |

## Antwortfelder

### RemoveProjectUser Antwort

| Feld | Typ | Beschreibung |
|-------|------|-------------|
| `success` | Boolean! | Ob die Operation erfolgreich war |  |
| `operationId` | String | Eindeutiger Bezeichner für die Operation (gibt derzeit `null` zurück) |  |

### RemoveCompanyUser Antwort

Die `removeCompanyUser` Mutation gibt einen einfachen `Boolean` Wert zurück:
- `true` - Benutzer wurde erfolgreich entfernt

## Erforderliche Berechtigungen

### Projektbenutzerentfernung

| Rolle | Kann Benutzer entfernen |
|------|-----------------|
| `OWNER` | ✅ Ja |  |
| `ADMIN` | ✅ Ja |  |
| `MEMBER` | ❌ Nein |  |
| `READ_ONLY` | ❌ Nein |  |

**Wichtige Hinweise:**
- Sie können Benutzer mit der Rolle `OWNER` nicht aus einem Projekt entfernen
- Das System verhindert die Entfernung von Projektinhabern, um die Integrität des Projektbesitzes aufrechtzuerhalten

### Unternehmensbenutzerentfernung

| Rolle | Kann Benutzer entfernen |
|------|-----------------|
| `OWNER` | ✅ Ja |  |
| `ADMIN` | ❌ Nein |  |
| `MEMBER` | ❌ Nein |  |
| `READ_ONLY` | ❌ Nein |  |

**Hinweis:** Nur Unternehmensinhaber können Benutzer aus dem Unternehmen entfernen. Der Resolver erzwingt strengen Zugang nur für INHABER bei den Operationen zur Entfernung von Unternehmensbenutzern.

## Nebenwirkungen

### Projektentfernung
- Entfernt alle Aufgaben zugewiesen für den Benutzer in diesem Projekt
- Löscht die Projektordner des Benutzers
- Entfernt die Benutzer-Projekt-Beziehung
- Sendet Echtzeit-Updates, um andere Benutzer zu benachrichtigen
- Erstellt einen Eintrag im Prüfungsprotokoll

### Unternehmensentfernung
- **Kaskadierende Löschung über alle Projekte:**
  - Entfernt alle Aufgaben in allen Unternehmensprojekten
  - Entfernt alle Projektbenutzerordner
  - Entfernt den Benutzer aus allen Unternehmensprojekten
- Entfernt Unternehmensbenutzerordner
- Entfernt den Benutzer aus dem Unternehmen
- Sendet eine Benachrichtigungs-E-Mail über die Entfernung an den entfernten Benutzer
- **Aktualisiert die Abrechnung (wenn Preis pro Benutzer):**
  - Berechnet die Anzahl aktiver Benutzer neu
  - Aktualisiert die Stripe-Abonnementmenge
- Erstellt einen Eintrag im Prüfungsprotokoll

## Fehlerantworten

### Projekt nicht gefunden
```json
{
  "errors": [{
    "message": "Project was not found.",
    "extensions": {
      "code": "PROJECT_NOT_FOUND"
    }
  }]
}
```

### Benutzer nicht gefunden
```json
{
  "errors": [{
    "message": "User was not found.",
    "extensions": {
      "code": "USER_NOT_FOUND"
    }
  }]
}
```

### Unbefugter Fehler
```json
{
  "errors": [{
    "message": "You are not authorized.",
    "extensions": {
      "code": "FORBIDDEN"
    }
  }]
}
```

### Unternehmen nicht gefunden (nur removeCompanyUser)
```json
{
  "errors": [{
    "message": "Company was not found.",
    "extensions": {
      "code": "COMPANY_NOT_FOUND"
    }
  }]
}
```

Dieser Fehler tritt auf, wenn:
- Ihnen die erforderliche Rolle fehlt (EIGENTÜMER/ADMIN für Projekte, EIGENTÜMER für Unternehmen)
- Sie versuchen, einen Projekt-EIGENTÜMER zu entfernen
- Der Benutzer ist nicht Teil des Projekts/Unternehmens

## Wichtige Überlegungen

- **Datenbewahrung**: Die Entfernung von Benutzern ist nicht umkehrbar. Während der Benutzer den Zugriff verliert, bleiben seine historischen Daten (Kommentare, Aktivitätsprotokolle usw.) aus Prüfungszwecken erhalten.
- **Schutz der Eigentümer**: Projektinhaber können nicht aus Projekten entfernt werden. Übertragen Sie zuerst das Eigentum, falls erforderlich.
- **Auswirkungen auf die Abrechnung**: Die Entfernung von Unternehmensbenutzern aktualisiert automatisch Ihr Abonnement, wenn Sie nach Benutzerpreisen abgerechnet werden.
- **E-Mail-Benachrichtigung**: Die Unternehmensentfernung sendet eine Benachrichtigungs-E-Mail an den entfernten Benutzer.
- **Kaskadeneffekt**: Die Unternehmensentfernung wirkt sich auf alle Projekte aus, während die Projektentfernung auf dieses spezifische Projekt beschränkt ist.

## Verwandte Operationen

- [Benutzer auflisten](/api/user-management/list-users) - Benutzer vor der Entfernung anzeigen
- [Benutzerdefinierte Rolle abrufen](/api/user-management/retrieve-custom-role) - Benutzerberechtigungen überprüfen
- [Projekt erstellen](/api/projects/create-project) - Benutzer zu neuen Projekten hinzufügen