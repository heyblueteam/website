---
title: Remover Usuários
description: Remova usuários de projetos ou empresas usando a API Blue.
---

## Remover Usuários

Esta página aborda como remover usuários de projetos e empresas. A remoção de usuários é uma ação permanente que desassocia o usuário de todos os registros e remove seu acesso, embora seus dados históricos sejam preservados para fins de auditoria.

## Remover Usuário de Projeto

Remova um usuário de um projeto específico enquanto mantém seu acesso à empresa.

### Exemplo Básico

```graphql
mutation {
  removeProjectUser(
    input: {
      projectId: "project-id"
      userId: "user-id"
    }
  ) {
    success
    operationId
  }
}
```

### Exemplo de Resposta

```json
{
  "data": {
    "removeProjectUser": {
      "success": true,
      "operationId": null
    }
  }
}
```

**Nota:** O campo `operationId` atualmente não é preenchido por esta mutação e retornará `null`.

## Remover Usuário da Empresa

Remova um usuário de toda a empresa, o que se propaga para todos os projetos.

### Exemplo Básico

```graphql
mutation {
  removeCompanyUser(
    input: {
      companyId: "company-id"
      userId: "user-id"
    }
  )
}
```

### Exemplo de Resposta

```json
{
  "data": {
    "removeCompanyUser": true
  }
}
```

## Parâmetros de Entrada

### RemoveProjectUserInput

| Parâmetro | Tipo | Obrigatório | Descrição |
|-----------|------|-------------|-----------|
| `projectId` | String! | ✅ Sim | O ID do projeto (não slug) |  |
| `userId` | String! | ✅ Sim | O ID do usuário a ser removido |  |

### RemoveCompanyUserInput

| Parâmetro | Tipo | Obrigatório | Descrição |
|-----------|------|-------------|-----------|
| `companyId` | String! | ✅ Sim | O ID ou slug da empresa |  |
| `userId` | String! | ✅ Sim | O ID do usuário a ser removido |  |

## Campos de Resposta

### Resposta RemoveProjectUser

| Campo | Tipo | Descrição |
|-------|------|-----------|
| `success` | Boolean! | Se a operação foi bem-sucedida |  |
| `operationId` | String | Identificador único para a operação (atualmente retorna `null`) |  |

### Resposta RemoveCompanyUser

A mutação `removeCompanyUser` retorna um simples valor `Boolean`:
- `true` - Usuário foi removido com sucesso

## Permissões Necessárias

### Remoção de Usuário do Projeto

| Função | Pode Remover Usuários |
|--------|----------------------|
| `OWNER` | ✅ Sim |  |
| `ADMIN` | ✅ Sim |  |
| `MEMBER` | ❌ Não |  |
| `READ_ONLY` | ❌ Não |  |

**Notas Importantes:**
- Você não pode remover usuários com a função `OWNER` de um projeto
- O sistema impede a remoção de proprietários de projetos para manter a integridade da propriedade do projeto

### Remoção de Usuário da Empresa

| Função | Pode Remover Usuários |
|--------|----------------------|
| `OWNER` | ✅ Sim |  |
| `ADMIN` | ❌ Não |  |
| `MEMBER` | ❌ Não |  |
| `READ_ONLY` | ❌ Não |  |

**Nota:** Apenas os proprietários da empresa podem remover usuários da empresa. O resolvedor impõe acesso estrito apenas para PROPRIETÁRIOS nas operações de remoção de usuários da empresa.

## Efeitos Colaterais

### Remoção de Projeto
- Remove todas as atribuições de tarefas para o usuário nesse projeto
- Exclui as pastas do projeto do usuário
- Remove o relacionamento do usuário com o projeto
- Envia atualizações em tempo real para notificar outros usuários
- Cria uma entrada no log de auditoria

### Remoção da Empresa
- **Exclusão em cascata em todos os projetos:**
  - Remove todas as atribuições de tarefas em todos os projetos da empresa
  - Remove todas as pastas de usuários do projeto
  - Remove o usuário de todos os projetos da empresa
- Remove pastas de usuários da empresa
- Remove o usuário da empresa
- Envia um e-mail de notificação de remoção para o usuário removido
- **Atualiza a cobrança (se o preço for por usuário):**
  - Recalcula a contagem de usuários ativos
  - Atualiza a quantidade da assinatura do Stripe
- Cria uma entrada no log de auditoria

## Respostas de Erro

### Projeto Não Encontrado
```json
{
  "errors": [{
    "message": "Project was not found.",
    "extensions": {
      "code": "PROJECT_NOT_FOUND"
    }
  }]
}
```

### Usuário Não Encontrado
```json
{
  "errors": [{
    "message": "User was not found.",
    "extensions": {
      "code": "USER_NOT_FOUND"
    }
  }]
}
```

### Erro Não Autorizado
```json
{
  "errors": [{
    "message": "You are not authorized.",
    "extensions": {
      "code": "FORBIDDEN"
    }
  }]
}
```

### Empresa Não Encontrada (removeCompanyUser apenas)
```json
{
  "errors": [{
    "message": "Company was not found.",
    "extensions": {
      "code": "COMPANY_NOT_FOUND"
    }
  }]
}
```

Este erro ocorre quando:
- Você não possui a função necessária (PROPRIETÁRIO/ADMIN para projetos, PROPRIETÁRIO para empresa)
- Você tenta remover um PROPRIETÁRIO de projeto
- O usuário não faz parte do projeto/empresa

## Considerações Importantes

- **Preservação de Dados**: A remoção de usuários não é reversível. Embora o usuário perca o acesso, seus dados históricos (comentários, registros de atividade, etc.) são preservados para fins de auditoria.
- **Proteção do Proprietário**: Proprietários de projetos não podem ser removidos de projetos. Transfira a propriedade primeiro, se necessário.
- **Impacto na Cobrança**: A remoção de usuários da empresa atualiza automaticamente sua assinatura se você estiver com preços por usuário.
- **Notificação por E-mail**: A remoção da empresa envia um e-mail de notificação para o usuário removido.
- **Efeito Cascata**: A remoção da empresa afeta todos os projetos, enquanto a remoção do projeto é isolada a esse projeto específico.

## Operações Relacionadas

- [Listar Usuários](/api/user-management/list-users) - Visualizar usuários antes da remoção
- [Recuperar Função Personalizada](/api/user-management/retrieve-custom-role) - Verificar permissões do usuário
- [Criar Projeto](/api/projects/create-project) - Adicionar usuários a novos projetos